# ==================== 服务器配置 ====================
NODE_ENV=development
PORT=8081

# ==================== 数据库配置（与 Go 后端共享）====================
# ⚠️ 必须使用与 Go 后端相同的数据库配置
DATABASE_HOST=localhost
DATABASE_PORT=5436
DATABASE_USER=genai
DATABASE_PASSWORD=genai_password
DATABASE_NAME=go_genai_stack
DATABASE_SSL_MODE=disable

# 连接池配置
DATABASE_MAX_CONNECTIONS=25
DATABASE_IDLE_TIMEOUT=10000
DATABASE_CONNECTION_TIMEOUT=2000

# ==================== Redis 配置 ====================
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DB=0

# ==================== JWT 配置（可选）====================
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=7d

# ==================== 日志配置 ====================
# 结构化日志配置（基于 Pino）
LOGGING_ENABLED=true
LOGGING_LEVEL=info                    # debug, info, warn, error
LOGGING_FORMAT=json                   # json (生产环境) 或 pretty (开发环境)
LOGGING_OUTPUT=stdout                 # stdout, stderr, file

# 文件输出配置（当 LOGGING_OUTPUT=file 时）
# 注意：在 Docker 容器中，建议使用卷挂载将日志文件保存到宿主机
# 例如：docker run -v /host/logs:/app/logs ...
LOGGING_OUTPUT_PATH=./logs/app.log    # 日志文件路径（相对路径或绝对路径）
LOGGING_MAX_SIZE=100                  # 单个日志文件最大大小（MB）
LOGGING_MAX_BACKUPS=3                 # 保留的旧日志文件数量
LOGGING_MAX_AGE=7                     # 保留旧日志文件的最大天数
LOGGING_COMPRESS=true                 # 是否压缩旧日志文件（.gz）

# ==================== 可观测性配置（可选）====================
# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9091

# OpenTelemetry Tracing
TRACING_ENABLED=false
TRACING_ENDPOINT=http://localhost:4318

# ==================== Agent 配置（可选，用于 LangChain.js）====================
# OPENAI_API_KEY=your-openai-api-key
# ANTHROPIC_API_KEY=your-anthropic-api-key

# ==================== 队列配置（可选，用于 BullMQ）====================
# 队列功能开关
QUEUE_ENABLED=true

# 队列使用的 Redis DB（与缓存分离，避免冲突）
# 缓存使用 REDIS_DB=0，队列使用 QUEUE_REDIS_DB=1
QUEUE_REDIS_DB=1

# Worker 配置
QUEUE_WORKER_CONCURRENCY=10        # Worker 并发数（同时处理的任务数）
QUEUE_WORKER_MAX_RETRIES=3        # 最大重试次数
QUEUE_WORKER_RETRY_DELAY=5000     # 重试延迟（毫秒）

# 注意：队列使用与 Redis 缓存相同的 Redis 实例
# 但使用不同的 DB 编号（REDIS_DB vs QUEUE_REDIS_DB）
# 队列配置会从上面的 REDIS_HOST、REDIS_PORT、REDIS_PASSWORD 读取连接信息

