{
  "domain": "chat",
  "version": "1.0.0",
  "last_updated": "2024-11-22",
  "description": "Chat domain handles user conversations with AI assistants",
  "sensitivity": "medium",
  "vector_tags": ["chat", "conversation", "message", "llm", "streaming"],
  "ai_friendly": {
    "structure": "vibe-coding-ddd",
    "declarative_usecases": true,
    "explicit_knowledge": true,
    "context_files": [
      "README.md",
      "glossary.md",
      "rules.md",
      "events.md",
      "usecases.yaml"
    ]
  },
  "ingestion_priority": [
    "README.md",
    "usecases.yaml",
    "glossary.md",
    "rules.md",
    "events.md",
    "http/dto",
    "handlers",
    "model"
  ],
  "key_concepts": [
    "Conversation",
    "Message",
    "History",
    "Context Window",
    "Streaming"
  ],
  "aggregates": [
    {
      "name": "Conversation",
      "description": "Root aggregate for a chat conversation",
      "identifier": "ConversationID",
      "entities": ["Message"],
      "value_objects": []
    }
  ],
  "use_cases": [
    {
      "name": "SendMessage",
      "http_method": "POST",
      "path": "/api/chat/send",
      "sensitivity": "medium",
      "modifies_state": true
    },
    {
      "name": "StreamMessage",
      "http_method": "POST",
      "path": "/api/chat/stream",
      "sensitivity": "medium",
      "modifies_state": true
    },
    {
      "name": "GetHistory",
      "http_method": "GET",
      "path": "/api/chat/history/:id",
      "sensitivity": "low",
      "modifies_state": false
    },
    {
      "name": "CreateConversation",
      "http_method": "POST",
      "path": "/api/chat/conversations",
      "sensitivity": "low",
      "modifies_state": true
    },
    {
      "name": "DeleteConversation",
      "http_method": "DELETE",
      "path": "/api/chat/conversations/:id",
      "sensitivity": "high",
      "modifies_state": true
    },
    {
      "name": "ListConversations",
      "http_method": "GET",
      "path": "/api/chat/conversations",
      "sensitivity": "low",
      "modifies_state": false
    }
  ],
  "events": [
    "MessageSent",
    "MessageReceived",
    "MessageFiltered",
    "ConversationCreated",
    "ConversationUpdated",
    "ConversationDeleted",
    "StreamStarted",
    "StreamCompleted",
    "StreamFailed",
    "RateLimitExceeded",
    "ContextLimitExceeded"
  ],
  "dependencies": {
    "domains": ["llm", "monitoring"],
    "external_services": ["LLM Provider APIs"],
    "infrastructure": ["database", "cache", "event_bus"]
  },
  "testing": {
    "unit_tests": "tests/*_test.go",
    "coverage_target": 80,
    "critical_paths": [
      "SendMessage",
      "StreamMessage",
      "GetHistory"
    ]
  },
  "observability": {
    "metrics": [
      "messages_sent_total",
      "messages_received_total",
      "stream_duration_seconds",
      "tokens_used_total",
      "rate_limit_exceeded_total"
    ],
    "traces": true,
    "logs": {
      "level": "info",
      "structured": true
    }
  },
  "ai_generation_hints": {
    "handler_template": "handlers/{usecase}.handler.go",
    "test_template": "tests/{usecase}.test.go",
    "dto_location": "http/dto/{usecase}.go",
    "follow_usecases_yaml": true,
    "include_error_handling": true,
    "include_logging": true,
    "include_metrics": true
  }
}

