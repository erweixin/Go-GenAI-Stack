# Project Design: Go-GenAI-Stack

> **Slogan**: The AI-friendly fullstack foundation for building production-ready GenAI applications.
> 
> **ä¸­æ–‡å£å·**: AI å‹å¥½çš„ Go GenAI å…¨æ ˆæ¡†æ¶ï¼Œç”¨ Cursor å¿«é€Ÿå¼€å‘ç”Ÿäº§çº§ LLM åº”ç”¨çš„æœ€ä½³èµ·ç‚¹ã€‚
> 
> **æ ¸å¿ƒå®šä½**: 
> - ğŸ¤– **AI-Friendly**: ä¸“ä¸º Cursor/AI è¾…åŠ©å¼€å‘ä¼˜åŒ–ï¼Œä»£ç ç»“æ„æ¸…æ™°ã€è¯­ä¹‰åŒ–å‘½åã€DDD æ¶æ„æ˜“äº AI ç†è§£
> - ğŸš€ **ç”Ÿäº§å°±ç»ª**: å¼€ç®±å³ç”¨çš„é™æµã€ç†”æ–­ã€ç›‘æ§ã€æˆæœ¬æ§åˆ¶
> - âš¡ **å¿«é€Ÿå¯åŠ¨**: Docker Compose ä¸€é”®å¯åŠ¨ï¼Œ5 åˆ†é’Ÿå¼€å§‹ vibe coding
> 
> **æŠ€æœ¯æ ˆ**: Hertz + Eino + DDD + React 19 + shadcn/ui

## 1. èƒŒæ™¯ä¸ç—›ç‚¹ (Why this?)

åœ¨ LLM åº”ç”¨å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ **AI è¾…åŠ©ç¼–ç¨‹æ—¶ä»£**ï¼Œå¼€å‘è€…é¢ä¸´ä»¥ä¸‹ç—›ç‚¹ï¼š

*   **ç°çŠ¶**ï¼š
    - Python ç”Ÿæ€æœ‰å¤§é‡æ¡†æ¶å’Œå·¥å…·ï¼Œä½† Go ç”Ÿæ€ç›¸å¯¹ç©ºç™½ï¼Œç¼ºå°‘å®Œæ•´çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆ
    - **AI è¾…åŠ©å¼€å‘ï¼ˆCursorã€Copilotï¼‰å·²æˆä¸ºä¸»æµï¼Œä½†å¤§å¤šæ•°ä»£ç åº“å¯¹ AI ä¸å‹å¥½**

*   **é—®é¢˜**ï¼š
    1.  **ç¼ºå°‘å…¨æ ˆæ¨¡æ¿**ï¼šå¼€å‘è€…éœ€è¦ä»é›¶æ­å»ºå‰åç«¯ã€æ•°æ®åº“ã€éƒ¨ç½²ç­‰ï¼Œè€—æ—¶è€—åŠ›
    2.  **æœ€ä½³å®è·µç¼ºå¤±**ï¼šGo åœ¨ LLM é¢†åŸŸçš„æœ€ä½³å®è·µå°šæœªå½¢æˆï¼Œå¼€å‘è€…éœ€è¦è‡ªå·±æ‘¸ç´¢
    3.  **éƒ¨ç½²å¤æ‚**ï¼šç¼ºå°‘ä¸€é”®éƒ¨ç½²æ–¹æ¡ˆï¼Œç”Ÿäº§ç¯å¢ƒé…ç½®å›°éš¾
    4.  **ç±»å‹å®‰å…¨ä¸è¶³**ï¼šPython çš„åŠ¨æ€ç‰¹æ€§åœ¨ LLM åº”ç”¨ä¸­å®¹æ˜“å‡ºé”™ï¼ŒGo çš„ç±»å‹å®‰å…¨ä¼˜åŠ¿æœªå¾—åˆ°å‘æŒ¥
    5.  **ğŸš¨ AI éš¾ä»¥ç†è§£ä¼ ç»Ÿä»£ç åº“**ï¼š
        - ä»£ç ç»“æ„æ··ä¹±ã€å‘½åä¸è§„èŒƒ
        - ç¼ºå°‘æ³¨é‡Šå’Œæ–‡æ¡£
        - éšå¼ä¾èµ–ã€å…¨å±€çŠ¶æ€
        - **AI éœ€è¦å¤§é‡ prompt æ‰èƒ½ç”Ÿæˆæ­£ç¡®ä»£ç ï¼Œå¼€å‘æ•ˆç‡ä½**

**Python ç”Ÿæ€** æœ‰å¤§é‡æˆç†Ÿçš„æ¡†æ¶ï¼ˆLangChainã€LlamaIndex ç­‰ï¼‰å’Œ starter æ¨¡æ¿ã€‚
**Go ç”Ÿæ€** ç›®å‰**ç¼ºå¤±**ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„ã€**AI-Friendly** çš„å…¨æ ˆ starter é¡¹ç›®ã€‚

### 1.1 ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›åŠŸèƒ½ï¼Ÿ

#### æ‰¿è®¤ç°çŠ¶
*   **Python ç”Ÿæ€å·²æˆç†Ÿ**ï¼šInstructorï¼ˆç»“æ„åŒ–è¾“å‡ºï¼‰ã€LiteLLMï¼ˆå¤šæ¨¡å‹è·¯ç”±ï¼‰ã€LangSmithï¼ˆç›‘æ§ï¼‰ç­‰å·²æœ‰å®Œæ•´è§£å†³æ–¹æ¡ˆ
*   **ä½† Go ç”Ÿæ€å‡ ä¹ç©ºç™½**ï¼šç¼ºå°‘ç”Ÿäº§å°±ç»ªçš„å…¨æ ˆ starterï¼Œå¼€å‘è€…éœ€è¦ä»é›¶æ­å»º

#### å·®å¼‚åŒ–ä¼˜åŠ¿
*   **ä¸æ˜¯åŠŸèƒ½åˆ›æ–°ï¼Œæ˜¯ç”Ÿæ€è¡¥å……**ï¼šå°† Python ç”Ÿæ€çš„æœ€ä½³å®è·µå¼•å…¥ Go
*   **å‘æŒ¥ Go çš„ç‹¬ç‰¹ä¼˜åŠ¿**ï¼š
    - **é«˜å¹¶å‘åœºæ™¯**ï¼š1000+ QPS çš„ LLM API Gatewayï¼ŒGo æ¯” Python æ€§èƒ½æ›´å¥½
    - **å•äºŒè¿›åˆ¶éƒ¨ç½²**ï¼šæ— éœ€ Python è¿è¡Œæ—¶ï¼Œé€‚åˆä¼ä¸šå†…ç½‘/è¾¹ç¼˜ç¯å¢ƒ
    - **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æœŸæ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
    - **å†…å­˜å ç”¨ä½**ï¼šé€‚åˆèµ„æºå—é™ç¯å¢ƒ
*   **èšç„¦å…¨æ ˆ Starter å®šä½**ï¼šä¸æ˜¯æ¡†æ¶ï¼Œæ˜¯å¼€ç®±å³ç”¨çš„å®Œæ•´åº”ç”¨æ¨¡æ¿
*   **é›†æˆå­—èŠ‚æŠ€æœ¯æ ˆ**ï¼šHertz + Einoï¼Œåˆ©ç”¨å­—èŠ‚åœ¨ LLM é¢†åŸŸçš„å·¥ç¨‹å®è·µ
*   **ğŸ¤– AI-Friendly è®¾è®¡**ï¼šä¸“ä¸º AI è¾…åŠ©å¼€å‘ä¼˜åŒ–ï¼Œæ˜¯ä½¿ç”¨ Cursor è¿›è¡Œ vibe coding çš„æœ€ä½³èµ·ç‚¹

## 2. å¸‚åœºæœºä¼šä¸ç«äº‰åˆ†æ

### 2.1 ç«äº‰æ€åŠ¿

#### ç°æœ‰ç«äº‰å¯¹æ‰‹ï¼ˆæ¡†æ¶ç±»ï¼Œéå…¨æ ˆ starterï¼‰

1. **Eino**ï¼ˆå­—èŠ‚è·³åŠ¨ï¼‰
   - å®šä½ï¼šGolang å¤§æ¨¡å‹åº”ç”¨å¼€å‘æ¡†æ¶
   - Starsï¼šä¸­ç­‰ï¼ˆå­—èŠ‚èƒŒæ™¯ï¼‰
   - ç‰¹ç‚¹ï¼šå€Ÿé‰´ LangChain/LlamaIndexï¼Œæä¾›ç»Ÿä¸€çš„ LLM è°ƒç”¨æ¥å£
   - **å…³ç³»ï¼šäº’è¡¥**ï¼ˆEino æ˜¯æ¡†æ¶ï¼Œæœ¬é¡¹ç›®æ˜¯åŸºäº Eino çš„å…¨æ ˆ starterï¼‰
   - **ä¼˜åŠ¿**ï¼šåˆ©ç”¨ Eino ç®€åŒ–å¤šæ¨¡å‹é›†æˆï¼Œä¸“æ³¨ä¸Šå±‚ä¸šåŠ¡é€»è¾‘

2. **LangChain Go**
   - å®šä½ï¼šLangChain çš„ Go å®ç°
   - Starsï¼šè¾ƒå°‘
   - ç‰¹ç‚¹ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ¡†æ¶çº§
   - **ç«äº‰åº¦ï¼šä½**ï¼ˆä¸æ˜¯ starterï¼‰

3. **LinGoose**
   - å®šä½ï¼šæ¨¡å—åŒ– Go AI/LLM åº”ç”¨æ¡†æ¶
   - Starsï¼šè¾ƒå°‘
   - ç‰¹ç‚¹ï¼šåŠŸèƒ½æŠ½è±¡ï¼Œæ¡†æ¶çº§
   - **ç«äº‰åº¦ï¼šä½**ï¼ˆä¸æ˜¯ starterï¼‰

#### å…¨æ ˆ Starter ç±»

- **æœç´¢ç»“æœ**ï¼šæœªå‘ç°æˆç†Ÿçš„ Go + LLM å…¨æ ˆ starter
- **ç©ºç™½ç‚¹**ï¼šå…¨æ ˆæ¨¡æ¿/è„šæ‰‹æ¶é¡¹ç›®å‡ ä¹ç©ºç™½ï¼Œæœºä¼šå·¨å¤§

### 2.2 ç«äº‰æ¿€çƒˆåº¦è¯„ä¼°

| ç»´åº¦ | ç«äº‰æ¿€çƒˆåº¦ | è¯´æ˜ |
|------|-----------|------|
| æ¡†æ¶ç±» | ä¸­ç­‰ | å·²æœ‰å‡ ä¸ªæ¡†æ¶ï¼Œä½†ä¸å¤Ÿæˆç†Ÿ |
| **å…¨æ ˆ Starter** | **ä½** | **å‡ ä¹ç©ºç™½ï¼Œæœºä¼šå·¨å¤§** |
| æ–‡æ¡£/æ•™ç¨‹ | ä½ | ç¼ºå°‘å®Œæ•´ç¤ºä¾‹ |
| ç”Ÿäº§å°±ç»ª | ä½ | ç¼ºå°‘ç”Ÿäº§çº§æœ€ä½³å®è·µ |

### 2.3 å·®å¼‚åŒ–ç«äº‰ç­–ç•¥

#### å®šä½å·®å¼‚åŒ–
- **ç°æœ‰é¡¹ç›®**ï¼šæä¾›æ¡†æ¶/åº“
- **æœ¬é¡¹ç›®**ï¼šæä¾›å¼€ç®±å³ç”¨çš„å…¨æ ˆæ¨¡æ¿
- **ä¼˜åŠ¿**ï¼šé™ä½ä¸Šæ‰‹é—¨æ§›ï¼Œå¿«é€Ÿå¯åŠ¨

#### åŠŸèƒ½å·®å¼‚åŒ–
```
ç°æœ‰æ¡†æ¶ï¼ˆEino/LangChain Goï¼‰ï¼šæä¾›æŠ½è±¡å±‚å’Œå·¥å…·ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±æ­å»ºåº”ç”¨
æœ¬é¡¹ç›®ï¼šåŸºäº Eino + Hertz çš„å®Œæ•´åº”ç”¨ + DDD æ¶æ„ + æœ€ä½³å®è·µ + éƒ¨ç½²æ–¹æ¡ˆ
```

#### æŠ€æœ¯æ ˆå·®å¼‚åŒ–
- **å­—èŠ‚æŠ€æœ¯æ ˆåŠ æŒ**ï¼šHertzï¼ˆé«˜æ€§èƒ½ HTTP æ¡†æ¶ï¼‰+ Einoï¼ˆLLM æ¡†æ¶ï¼‰
- **DDD æ¶æ„è®¾è®¡**ï¼šæ¸…æ™°çš„é¢†åŸŸåˆ’åˆ†ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **ç”Ÿäº§çº§é…ç½®**ï¼šå¼€ç®±å³ç”¨çš„ç›‘æ§ã€é™æµã€ç†”æ–­ã€é‡è¯•æœºåˆ¶

#### ç”¨æˆ·ä½“éªŒå·®å¼‚åŒ–
- âœ… **AI-Friendly æ¶æ„**ï¼šDDD + è¯­ä¹‰åŒ–å‘½å + å®Œå–„æ³¨é‡Šï¼Œé€‚åˆ Cursor å¿«é€Ÿå¼€å‘
- âœ… **ä¸€é”®å¯åŠ¨**ï¼šDocker Compose å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼Œ5 åˆ†é’Ÿå¼€å§‹ vibe coding
- âœ… **å®Œæ•´æ–‡æ¡£**ï¼šä»é›¶åˆ°éƒ¨ç½² + AI è¾…åŠ©å¼€å‘æœ€ä½³å®è·µ
- âœ… **Cursor å‹å¥½**ï¼šæ¸…æ™°çš„ä»£ç ç»“æ„ï¼ŒAI ç”Ÿæˆä»£ç æ›´å‡†ç¡®
- âœ… **ç”Ÿäº§çº§é…ç½®**ï¼šç›‘æ§ã€é™æµã€ç†”æ–­ã€é‡è¯•ï¼Œå¼€ç®±å³ç”¨

## 3. æ ¸å¿ƒåŠŸèƒ½ (Core Features)

### 3.0 ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šAI-Friendlyï¼ˆæœ€å¤§å·®å¼‚åŒ–ï¼‰

è¿™æ˜¯æœ¬é¡¹ç›®æœ€æ ¸å¿ƒçš„å·®å¼‚åŒ–ä¼˜åŠ¿ï¼Œè¯¦è§ç¬¬ 6 èŠ‚ã€‚

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
- AI è¾…åŠ©ç¼–ç¨‹å·²æˆä¸ºä¸»æµï¼ˆCursorã€Copilotã€ChatGPTï¼‰
- ä¼ ç»Ÿä»£ç åº“ç»“æ„æ··ä¹±ï¼ŒAI éš¾ä»¥ç†è§£
- æœ¬é¡¹ç›®ä¸“ä¸º AI è¾…åŠ©å¼€å‘ä¼˜åŒ–ï¼šDDD æ¶æ„ + è¯­ä¹‰åŒ–å‘½å + å®Œå–„æ³¨é‡Š
- **æ˜¯ä½¿ç”¨ Cursor è¿›è¡Œ vibe coding çš„æœ€ä½³èµ·ç‚¹**

**ä»·å€¼**ï¼š
- å¼€å‘é€Ÿåº¦æå‡ 50%+ï¼ˆAI å‡†ç¡®ç†è§£ä»£ç æ„å›¾ï¼‰
- ä»£ç è´¨é‡æ›´é«˜ï¼ˆAI ç”Ÿæˆç¬¦åˆæ¶æ„çš„ä»£ç ï¼‰
- å­¦ä¹ æˆæœ¬æ›´ä½ï¼ˆAI å¸®åŠ©ç†è§£å’Œæ‰©å±•åŠŸèƒ½ï¼‰

### 3.1 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

1. **ç»“æ„åŒ–è¾“å‡º**
   - åŸºäº Go Struct çš„ Schema è‡ªåŠ¨ç”Ÿæˆ
   - ç±»å‹å®‰å…¨çš„ LLM å“åº”è§£æ
   - è‡ªåŠ¨é‡è¯•ä¸æ ¡éªŒï¼ˆç±»ä¼¼ Go-Instructorï¼‰
   - æ— éœ€æ‰‹åŠ¨ `json.Unmarshal`ï¼Œç›´æ¥æ˜ å°„åˆ°ç»“æ„ä½“
   - **è¿™æ˜¯ Go ç›¸æ¯” Python çš„æœ€å¤§ä¼˜åŠ¿**
   
   **æŠ€æœ¯å®ç°æ–¹æ¡ˆ**ï¼š
   - JSON Schema ç”Ÿæˆï¼š`invopop/jsonschema` åº“ä» Go struct ç”Ÿæˆ schema
   - Schema éªŒè¯ï¼š`xeipuuv/gojsonschema` éªŒè¯ LLM è¿”å›çš„ JSON
   - é‡è¯•æœºåˆ¶ï¼šéªŒè¯å¤±è´¥æ—¶ï¼Œå°†é”™è¯¯ä¿¡æ¯æ³¨å…¥ prompt é‡æ–°ç”Ÿæˆï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
   - ç¼“å­˜ä¼˜åŒ–ï¼šç›¸åŒ struct çš„ schema ç¼“å­˜ï¼Œé¿å…é‡å¤ç”Ÿæˆ
   - Eino é›†æˆï¼šåˆ©ç”¨ Eino çš„ç»Ÿä¸€æ¥å£è°ƒç”¨ä¸åŒæ¨¡å‹

2. **å¤šæ¨¡å‹è·¯ç”±ä¸è´Ÿè½½å‡è¡¡**
   - æ™ºèƒ½è·¯ç”±åˆ°ä¸åŒæ¨¡å‹/æä¾›å•†ï¼ˆOpenAI/Claude/Ollamaï¼‰
   - åŸºäºå»¶è¿Ÿã€æˆæœ¬ã€è´¨é‡çš„è·¯ç”±ç­–ç•¥
   - A/B æµ‹è¯•æ”¯æŒ
   - è‡ªåŠ¨é™çº§ä¸æ•…éšœè½¬ç§»
   - **ç”Ÿäº§çº§ LLM åº”ç”¨å¿…å¤‡**
   
   **è·¯ç”±ç­–ç•¥å®ç°**ï¼š
   - **å»¶è¿Ÿä¼˜å…ˆ**ï¼šç»´æŠ¤æ»‘åŠ¨çª—å£ç»Ÿè®¡ï¼ˆæœ€è¿‘ 100 æ¬¡è¯·æ±‚çš„ P95 å»¶è¿Ÿï¼‰ï¼Œé€‰æ‹©å»¶è¿Ÿæœ€ä½çš„æ¨¡å‹
   - **æˆæœ¬ä¼˜å…ˆ**ï¼šç¡¬ç¼–ç ä»·æ ¼è¡¨ï¼ˆinput/output token ä»·æ ¼ï¼‰ï¼Œé¢„ä¼° token æ•°ï¼Œé€‰æ‹©æˆæœ¬æœ€ä½çš„
   - **è´¨é‡ä¼˜å…ˆ**ï¼šåŸºäºç”¨æˆ·åé¦ˆè¯„åˆ†ï¼ˆéœ€è¦é¢å¤–çš„ feedback è¡¨ï¼‰ï¼Œé€‰æ‹©è¯„åˆ†æœ€é«˜çš„
   - **åŠ æƒè½®è¯¢**ï¼šæŒ‰æƒé‡åˆ†é…æµé‡ï¼ˆå¦‚ gpt-4o: 70%, claude-3: 30%ï¼‰
   - **æ•…éšœè½¬ç§»**ï¼šå½“ä¸»æ¨¡å‹å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æ¨¡å‹
   - **ç†”æ–­æœºåˆ¶**ï¼šå½“æŸæ¨¡å‹é”™è¯¯ç‡ > 50%ï¼Œè‡ªåŠ¨ç†”æ–­ 30 ç§’
   
   **æ•°æ®ç»“æ„**ï¼š
   ```go
   type ModelStats struct {
       ModelName      string
       AvgLatencyMs   float64    // å¹³å‡å»¶è¿Ÿ
       P95LatencyMs   float64    // P95 å»¶è¿Ÿ
       ErrorRate      float64    // é”™è¯¯ç‡
       AvgQuality     float64    // å¹³å‡è´¨é‡è¯„åˆ†
       TotalRequests  int64      // æ€»è¯·æ±‚æ•°
       LastUpdateTime time.Time  // æœ€åæ›´æ–°æ—¶é—´
   }
   ```

3. **LLM å¯è§‚æµ‹æ€§ä¸ç›‘æ§**
   - è¯·æ±‚è¿½è¸ªï¼ˆTraceï¼‰
   - å»¶è¿Ÿã€æˆæœ¬ã€è´¨é‡ç›‘æ§
   - Token ä½¿ç”¨ç»Ÿè®¡
   - é”™è¯¯ç‡ä¸æˆåŠŸç‡ç›‘æ§
   - æ€§èƒ½åˆ†æï¼ˆP95ã€P99 å»¶è¿Ÿï¼‰
   - **Go çš„é«˜æ€§èƒ½ç›‘æ§ä¼˜åŠ¿**
   
   **ç›‘æ§æ•°æ®å­˜å‚¨æ–¹æ¡ˆ**ï¼š
   - **å®æ—¶æŒ‡æ ‡**ï¼šå­˜å‚¨åœ¨ Redisï¼ˆå†…å­˜ç»Ÿè®¡ï¼Œçƒ­ç‚¹æ•°æ®ï¼Œ1 å°æ—¶ TTLï¼‰
   - **å†å²æŒ‡æ ‡**ï¼šå­˜å‚¨åœ¨ TimescaleDBï¼ˆPostgreSQL çš„æ—¶åºæ‰©å±•ï¼‰
   - **æ—¥å¿—**ï¼šç»“æ„åŒ–æ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œä½¿ç”¨ Loki æˆ– ELK æ”¶é›†ï¼ˆå¯é€‰ï¼‰
   
   **ç›‘æ§æŒ‡æ ‡è®¾è®¡**ï¼š
   ```go
   type LLMMetrics struct {
       TraceID        string    // è¯·æ±‚è¿½è¸ª ID
       UserID         string    // ç”¨æˆ· ID
       Model          string    // ä½¿ç”¨çš„æ¨¡å‹
       Provider       string    // æä¾›å•†ï¼ˆOpenAI/Claudeï¼‰
       StartTime      time.Time // å¼€å§‹æ—¶é—´
       EndTime        time.Time // ç»“æŸæ—¶é—´
       LatencyMs      int64     // å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
       InputTokens    int       // è¾“å…¥ token æ•°
       OutputTokens   int       // è¾“å‡º token æ•°
       CostUSD        float64   // æˆæœ¬ï¼ˆç¾å…ƒï¼‰
       Success        bool      // æ˜¯å¦æˆåŠŸ
       ErrorMessage   string    // é”™è¯¯ä¿¡æ¯
       QualityScore   float64   // è´¨é‡è¯„åˆ†ï¼ˆç”¨æˆ·åé¦ˆï¼‰
   }
   ```
   
   **æ€§èƒ½ç»Ÿè®¡å®ç°**ï¼š
   - ä½¿ç”¨ `github.com/HdrHistogram/hdrhistogram-go` è®¡ç®— P95/P99 å»¶è¿Ÿ
   - å¼‚æ­¥å†™å…¥ï¼ˆé€šè¿‡ Asynq ä»»åŠ¡é˜Ÿåˆ—ï¼Œé¿å…é˜»å¡ä¸»æµç¨‹ï¼‰
   - æ¯å°æ—¶èšåˆä¸€æ¬¡å†å²æ•°æ®ï¼ˆå¦‚æ¯å°æ—¶çš„å¹³å‡å»¶è¿Ÿã€æ€»æˆæœ¬ï¼‰

4. **é«˜æ€§èƒ½å¹¶å‘å¤„ç†**
   - Go åç¨‹æ± ç®¡ç†
   - è¿æ¥æ± ä¼˜åŒ–
   - æ‰¹é‡è¯·æ±‚å¤„ç†
   - æµå¼å“åº”ä¼˜åŒ–
   - **Go çš„æ ¸å¿ƒç«äº‰åŠ›**

5. **åŸºç¡€èŠå¤©ç•Œé¢**
   - å¤šè½®å¯¹è¯ç®¡ç†
   - æµå¼è¾“å‡ºï¼ˆSSEï¼‰
   - æ¶ˆæ¯å†å²æŒä¹…åŒ–
   - å¤šæ¨¡å‹åˆ‡æ¢
   
   **Context ç®¡ç†ç­–ç•¥**ï¼š
   - ä¸åŒæ¨¡å‹çš„ Context çª—å£é™åˆ¶ï¼ˆGPT-4o: 128k, GPT-3.5: 4k, Claude-3: 200kï¼‰
   - Token è®¡æ•°ï¼šä½¿ç”¨ `tiktoken-go` ç²¾ç¡®è®¡ç®— token æ•°
   - å†å²æ¶ˆæ¯è£å‰ªç­–ç•¥ï¼š
     - **æ»‘åŠ¨çª—å£**ï¼šä¿ç•™æœ€è¿‘ N æ¡æ¶ˆæ¯ï¼ˆç®€å•ï¼Œæ¨èç”¨äº MVPï¼‰
     - **æ‘˜è¦å‹ç¼©**ï¼šè¶…è¿‡é™åˆ¶æ—¶ï¼Œç”¨ LLM ç”Ÿæˆå†å²æ‘˜è¦
     - **é‡è¦æ€§æ’åº**ï¼šä¿ç•™ç”¨æˆ·æ ‡è®°ä¸º"é‡è¦"çš„æ¶ˆæ¯
   - é¢„ç•™ Tokenï¼šä¸ºå“åº”é¢„ç•™è‡³å°‘ 1000 tokens

6. **ç®¡ç†åå°**
   - API å¯†é’¥ç®¡ç†
   - ä½¿ç”¨ç»Ÿè®¡ä¸ç›‘æ§ Dashboard
   - æ—¥å¿—æŸ¥çœ‹ä¸æœç´¢
   - é…ç½®ç®¡ç†

### 3.2 æŠ€æœ¯äº®ç‚¹

1. **æ€§èƒ½ä¼˜åŒ–**
   - Go å¹¶å‘å¤„ç†ä¼˜åŠ¿
   - è¿æ¥æ± ç®¡ç†
   - æ™ºèƒ½å“åº”ç¼“å­˜

2. **ç±»å‹å®‰å…¨**
   - å¼ºç±»å‹å®šä¹‰
   - Schema éªŒè¯
   - ç¼–è¯‘æœŸæ£€æŸ¥

3. **ç”Ÿäº§å°±ç»ª**
   - å®Œå–„çš„é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶
   - ç»“æ„åŒ–æ—¥å¿—ä¸ç›‘æ§
   - å¥åº·æ£€æŸ¥ç«¯ç‚¹
   - é™æµä¸ç†”æ–­
   
   **é™æµç­–ç•¥**ï¼š
   - **ç®—æ³•**ï¼šä»¤ç‰Œæ¡¶ç®—æ³•ï¼ˆåŸºäº Redis å®ç°åˆ†å¸ƒå¼é™æµï¼‰
   - **ç»´åº¦**ï¼š
     - ç”¨æˆ·çº§åˆ«ï¼šæ¯ä¸ªç”¨æˆ·æ¯åˆ†é’Ÿæœ€å¤š 60 æ¬¡è¯·æ±‚
     - IP çº§åˆ«ï¼šæ¯ä¸ª IP æ¯åˆ†é’Ÿæœ€å¤š 100 æ¬¡è¯·æ±‚ï¼ˆé˜²æ­¢æœªè®¤è¯æ”»å‡»ï¼‰
     - å…¨å±€çº§åˆ«ï¼šæ•´ä¸ªç³»ç»Ÿæ¯ç§’æœ€å¤š 1000 æ¬¡è¯·æ±‚
   - **å®ç°åº“**ï¼š`go-redis/redis_rate`
   
   **ç†”æ–­ç­–ç•¥**ï¼š
   - **ç®—æ³•**ï¼šåŸºäºé”™è¯¯ç‡çš„ç†”æ–­ï¼ˆSony/gobreakerï¼‰
   - **è§¦å‘æ¡ä»¶**ï¼š10 ç§’å†…é”™è¯¯ç‡ > 50%ï¼ˆè‡³å°‘ 5 æ¬¡è¯·æ±‚ï¼‰
   - **ç†”æ–­æ—¶é•¿**ï¼š30 ç§’
   - **åŠå¼€çŠ¶æ€**ï¼šç†”æ–­å 30 ç§’ï¼Œå…è®¸ 1 æ¬¡è¯·æ±‚æµ‹è¯•ï¼ŒæˆåŠŸåˆ™æ¢å¤ï¼Œå¤±è´¥åˆ™ç»§ç»­ç†”æ–­
   - **åº”ç”¨åœºæ™¯**ï¼šæ¯ä¸ª LLM æä¾›å•†ç‹¬ç«‹ç†”æ–­
   
   **é‡è¯•æœºåˆ¶**ï¼š
   - **åº“**ï¼š`avast/retry-go`
   - **ç­–ç•¥**ï¼šæŒ‡æ•°é€€é¿ï¼ˆ1s, 2s, 4sï¼‰
   - **é‡è¯•æ¡ä»¶**ï¼š
     - 429ï¼ˆRate Limitï¼‰ï¼šé‡è¯•
     - 500/502/503/504ï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰ï¼šé‡è¯•
     - 408ï¼ˆTimeoutï¼‰ï¼šé‡è¯•
     - å…¶ä»–é”™è¯¯ï¼šä¸é‡è¯•
   - **æœ€å¤§é‡è¯•æ¬¡æ•°**ï¼š3 æ¬¡

4. **å¼€å‘ä½“éªŒ**
   - çƒ­é‡è½½æ”¯æŒ
   - æ¸…æ™°çš„æ–‡æ¡£
   - ä¸°å¯Œçš„ç¤ºä¾‹ä»£ç 
   - æµ‹è¯•è¦†ç›–

## 4. æŠ€æœ¯æ ˆé€‰å‹ (Tech Stack)

### 4.0 ä¸ºä»€ä¹ˆé€‰æ‹© Hertz + Einoï¼Ÿ

#### Hertz çš„ä¼˜åŠ¿
- **å­—èŠ‚è·³åŠ¨å¼€æº**ï¼šç»è¿‡å­—èŠ‚å†…éƒ¨å¤§è§„æ¨¡ç”Ÿäº§éªŒè¯
- **é«˜æ€§èƒ½**ï¼šåŸºäº Netpoll ç½‘ç»œåº“ï¼Œæ€§èƒ½ä¼˜äºæ ‡å‡† net/http
- **ä¸°å¯Œçš„ä¸­é—´ä»¶**ï¼šé™æµã€ç†”æ–­ã€é“¾è·¯è¿½è¸ªç­‰å¼€ç®±å³ç”¨
- **æ˜“äºé›†æˆ**ï¼šAPI è®¾è®¡ç±»ä¼¼ Ginï¼Œå­¦ä¹ æˆæœ¬ä½
- **ç”Ÿäº§å°±ç»ª**ï¼šå†…ç½®ç›‘æ§ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†
- **âœ… Code-First æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒ Go Struct + Tagï¼Œæ— éœ€ IDLï¼ˆThrift/Protobufï¼‰

#### Eino çš„ä¼˜åŠ¿
- **å­—èŠ‚è·³åŠ¨å¼€æº**ï¼šå€Ÿé‰´ LangChain/LlamaIndex çš„è®¾è®¡ç†å¿µ
- **ç»Ÿä¸€æ¥å£**ï¼šä¸€å¥—ä»£ç æ”¯æŒå¤šä¸ª LLM æä¾›å•†ï¼ˆOpenAIã€Claudeã€é€šä¹‰åƒé—®ç­‰ï¼‰
- **ç®€åŒ–é›†æˆ**ï¼šæ— éœ€ä¸ºæ¯ä¸ªæä¾›å•†å•ç‹¬å†™é€‚é…ä»£ç 
- **ç”Ÿäº§çº§ç‰¹æ€§**ï¼šå†…ç½®é‡è¯•ã€è¶…æ—¶ã€æµå¼å“åº”å¤„ç†
- **ç¤¾åŒºæ”¯æŒ**ï¼šå­—èŠ‚è·³åŠ¨æŒç»­ç»´æŠ¤

#### ç»„åˆä¼˜åŠ¿
- **æŠ€æœ¯æ ˆç»Ÿä¸€**ï¼šéƒ½æ˜¯å­—èŠ‚è·³åŠ¨å¼€æºï¼ŒæŠ€æœ¯æ ˆä¸€è‡´æ€§å¥½
- **ç›¸äº’é…åˆ**ï¼šHertz å¤„ç† HTTP å±‚ï¼ŒEino å¤„ç† LLM å±‚ï¼ŒèŒè´£æ¸…æ™°
- **ç”Ÿäº§éªŒè¯**ï¼šéƒ½ç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒéªŒè¯
- **å­¦ä¹ èµ„æº**ï¼šå­—èŠ‚è·³åŠ¨æœ‰å®Œå–„çš„æ–‡æ¡£å’Œæ¡ˆä¾‹

### 4.0.1 ğŸš« ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ IDLï¼ˆThrift/Protobufï¼‰ï¼Ÿ

**é‡è¦å†³ç­–**ï¼šæœ¬é¡¹ç›®**ä¸ä½¿ç”¨** `hz new` æˆ– `.thrift` æ–‡ä»¶æ¥ç®¡ç† HTTP æ¥å£ã€‚

#### IDL-First æ¨¡å¼å¯¹ Vibe Coding ä¸å‹å¥½

ä¼ ç»Ÿçš„ **"IDL First"** å¼€å‘æ¨¡å¼ï¼ˆThrift/Protobuf â†’ hz codegen â†’ Logicï¼‰ä¸ Vibe Coding çš„æ ¸å¿ƒç†å¿µå­˜åœ¨**å…ˆå¤©å†²çª**ï¼š

| é—®é¢˜ç»´åº¦ | IDL-First | Code-First (æœ¬é¡¹ç›®) |
|---------|-----------|-------------------|
| **è®¤çŸ¥è´Ÿæ‹…** | å¿…é¡»åœ¨ `.thrift` å’Œ `.go` é—´åˆ‡æ¢ | åªéœ€å…³æ³¨ Go ä»£ç  |
| **ä¸Šä¸‹æ–‡æ±¡æŸ“** | ç”Ÿæˆçš„ä»£ç ï¼ˆåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼‰å æ® AI ä¸Šä¸‹æ–‡çª—å£ | å¹²å‡€çš„ Go Structsï¼ŒAI å¯ç›´æ¥ç†è§£ |
| **ä¿®æ”¹æˆæœ¬** | æ”¹ IDL â†’ é‡æ–°ç”Ÿæˆ â†’ è§£å†³å†²çª â†’ æ”¹ Go ä»£ç  | ç›´æ¥æ”¹ Go Structï¼Œä¸€æ­¥åˆ°ä½ |
| **AI å¯æ“ä½œæ€§** | AI éš¾ä»¥è°ƒç”¨å¤–éƒ¨ CLI å·¥å…·ï¼ˆ`hz update`ï¼‰ | AI ç›´æ¥ä¿®æ”¹ Go ä»£ç  |
| **é¢†åŸŸè‡ªåŒ…å«** | ç”Ÿæˆä»£ç åˆ†æ•£åœ¨ `kitex_gen/` ç­‰å…¨å±€ç›®å½• | DTO åœ¨é¢†åŸŸå†…ï¼ˆ`domains/chat/http/dto/`ï¼‰ |
| **å¿ƒæµï¼ˆFlowï¼‰** | Think â†’ å†™ IDL â†’ ç”Ÿæˆ â†’ Codeï¼ˆæ–­è£‚ï¼‰ | Think â†’ Codeï¼ˆæµç•…ï¼‰ |

#### æˆ‘ä»¬çš„æ–¹æ¡ˆï¼šHertz Code-First

ä½¿ç”¨ Hertz åŸç”Ÿçš„ **Go Struct + Tag** å®šä¹‰ HTTP æ¥å£ï¼š

```go
// domains/chat/http/dto/send_message.go

type SendMessageRequest struct {
    UserID  string `json:"user_id" binding:"required"`
    Message string `json:"message" binding:"required,max=10000"`
    Model   string `json:"model" binding:"required,oneof=gpt-4o claude-3"`
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… **Single Source of Truth**ï¼šGo ä»£ç å³æ¥å£å®šä¹‰
- âœ… **AI å‹å¥½**ï¼šCursor å¯ä»¥ç›´æ¥è¯»æ‡‚å’Œä¿®æ”¹
- âœ… **å£°æ˜å¼éªŒè¯**ï¼š`binding` tag å³éªŒè¯è§„åˆ™
- âœ… **ç¬¦åˆ DDD**ï¼šDTO åœ¨é¢†åŸŸç›®å½•å†…ï¼Œä¿æŒè‡ªåŒ…å«

**ä»€ä¹ˆæ—¶å€™éœ€è¦ IDLï¼Ÿ**
- ä»…å½“éœ€è¦è·¨è¯­è¨€ RPC è°ƒç”¨ï¼ˆgRPCï¼‰æˆ–å¾®æœåŠ¡å¼ºå¥‘çº¦æ—¶
- æœ¬é¡¹ç›®æ˜¯å•ä½“æ¶æ„ï¼ŒHTTP API é¢å‘å‰ç«¯ï¼ˆTypeScriptï¼‰ï¼Œæ— éœ€ IDL

### 4.1 åç«¯ï¼ˆGoï¼‰

- **Web æ¡†æ¶**ï¼šHertzï¼ˆå­—èŠ‚è·³åŠ¨å¼€æºï¼Œé«˜æ€§èƒ½ HTTP æ¡†æ¶ï¼‰
- **LLM æ¡†æ¶**ï¼šEinoï¼ˆå­—èŠ‚è·³åŠ¨å¼€æºï¼ŒGo å¤§æ¨¡å‹åº”ç”¨å¼€å‘æ¡†æ¶ï¼‰
  - ç»Ÿä¸€çš„ LLM è°ƒç”¨æ¥å£
  - æ”¯æŒå¤šæ¨¡å‹ï¼ˆOpenAIã€Claudeã€Ollama ç­‰ï¼‰
  - æµå¼å“åº”å¤„ç†
  - å†…ç½® Prompt ç®¡ç†
- **æ¶æ„æ¨¡å¼**ï¼šDDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰
  - æ¸…æ™°çš„é¢†åŸŸè¾¹ç•Œ
  - åˆ†å±‚æ¶æ„ï¼ˆInterfaceã€Applicationã€Domainã€Infrastructureï¼‰
  - å‚è€ƒ coze-studio çš„ä»£ç ç»„ç»‡æ–¹å¼
- **æ•°æ®åº“**ï¼š
  - PostgreSQLï¼ˆå…³ç³»å‹æ•°æ®ï¼Œç”¨æˆ·/å¯¹è¯/ç›‘æ§æ•°æ®ï¼‰
  - TimescaleDB æ‰©å±•ï¼ˆæ—¶åºç›‘æ§æ•°æ®ï¼ŒP95/P99 å»¶è¿Ÿç»Ÿè®¡ï¼‰
  - Redisï¼ˆç¼“å­˜/ä¼šè¯/åˆ†å¸ƒå¼é™æµ/çƒ­ç‚¹ç»Ÿè®¡ï¼‰
- **å…¶ä»–ç»„ä»¶**ï¼š
  - é…ç½®ç®¡ç†ï¼šViper
  - æ—¥å¿—ï¼šZapï¼ˆç»“æ„åŒ–æ—¥å¿—ï¼‰
  - è®¤è¯ï¼šJWT
  - ä»»åŠ¡é˜Ÿåˆ—ï¼šAsynqï¼ˆå¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼Œå¿…éœ€ï¼‰
  - é™æµï¼šRedis + ä»¤ç‰Œæ¡¶ç®—æ³•
  - ç†”æ–­ï¼šSony/gobreaker
  - é‡è¯•ï¼šavast/retry-goï¼ˆæŒ‡æ•°é€€é¿ï¼‰
  - Token è®¡æ•°ï¼štiktoken-go

### 4.2 å‰ç«¯

- **æ¡†æ¶**ï¼šReact 19 + TypeScript
- **æ„å»ºå·¥å…·**ï¼šViteï¼ˆå¿«é€Ÿå¼€å‘ä½“éªŒï¼‰
- **æ ·å¼**ï¼šTailwind CSS
- **ç»„ä»¶åº“**ï¼šshadcn/uiï¼ˆæ— å¤´ç»„ä»¶ï¼Œé€‚åˆ AI åº”ç”¨å®šåˆ¶ï¼‰
- **çŠ¶æ€ç®¡ç†**ï¼šZustandï¼ˆè½»é‡çº§ï¼‰
- **æµå¼ UI**ï¼š
  - SSEï¼ˆServer-Sent Eventsï¼‰æ¥æ”¶æµå¼å“åº”
  - React Suspense + useTransition ä¼˜åŒ–æ¸²æŸ“
  - æ‰“å­—æœºæ•ˆæœç»„ä»¶
- **HTTP å®¢æˆ·ç«¯**ï¼šAxios
- **Markdown æ¸²æŸ“**ï¼šreact-markdown + rehype æ’ä»¶
- **ä»£ç é«˜äº®**ï¼šPrism.js
- **ç±»å‹åŒæ­¥**ï¼štygoï¼ˆGo Struct â†’ TypeScript æ¥å£è‡ªåŠ¨ç”Ÿæˆï¼‰

### 4.2.1 å‰åç«¯ç±»å‹åŒæ­¥æ–¹æ¡ˆ

**æ ¸å¿ƒç†å¿µ**ï¼šGo Code æ˜¯ **Single Source of Truth**ï¼Œå‰ç«¯ç±»å‹è‡ªåŠ¨ç”Ÿæˆã€‚

#### æ–¹æ¡ˆä¸€ï¼štygo è‡ªåŠ¨åŒ–ç”Ÿæˆï¼ˆåŸºå»ºï¼‰

ä½¿ç”¨ `tygo` å°†åç«¯çš„ Go Structs è½¬æ¢ä¸º TypeScript æ¥å£ã€‚

##### 1. å®‰è£…

```bash
go install github.com/gzuidhof/tygo@latest
```

##### 2. é…ç½® (`tygo.yaml`)

```yaml
# tygo.yaml
packages:
  # èŠå¤©é¢†åŸŸ
  - path: "backend/domains/chat/http/dto"
    output_path: "frontend/src/types/domain/chat.ts"
    type_mappings:
      "time.Time": "string"
      "github.com/shopspring/decimal.Decimal": "string"

  # LLM é¢†åŸŸ
  - path: "backend/domains/llm/http/dto"
    output_path: "frontend/src/types/domain/llm.ts"

  # ç›‘æ§é¢†åŸŸ
  - path: "backend/domains/monitoring/http/dto"
    output_path: "frontend/src/types/domain/monitoring.ts"

  # å…±äº«ç±»å‹
  - path: "backend/domains/shared/types"
    output_path: "frontend/src/types/shared.ts"
```

##### 3. åŒæ­¥è„šæœ¬ (`scripts/sync_types.sh`)

```bash
#!/bin/bash
echo "ğŸ”„ Syncing Go Structs to TypeScript..."
tygo generate
echo "âœ… Frontend types updated!"
```

##### 4. æ•ˆæœç¤ºä¾‹

**Backend (`backend/domains/chat/http/dto/send_message.go`)**:
```go
package dto

type SendMessageRequest struct {
    UserID  string `json:"user_id"`
    Message string `json:"message"`
    Model   string `json:"model,omitempty"` // Optional
}

type SendMessageResponse struct {
    MessageID string `json:"message_id"`
    Content   string `json:"content"`
}
```

**Generated Frontend (`frontend/src/types/domain/chat.ts`)**:
```typescript
// Code generated by tygo. DO NOT EDIT.

export interface SendMessageRequest {
  user_id: string;
  message: string;
  model?: string;
}

export interface SendMessageResponse {
  message_id: string;
  content: string;
}
```

#### æ–¹æ¡ˆäºŒï¼šCursor AI å®æ—¶ç”Ÿæˆï¼ˆæ—¥å¸¸å¼€å‘ï¼‰

åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå½“æ·»åŠ æ–°å­—æ®µæ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Cursor æ¥åŒæ­¥ç±»å‹ã€‚

##### ä½¿ç”¨ Cursor Composer (Cmd/Ctrl + I)

```
æç¤ºè¯ï¼š
"è¯»å– backend/domains/chat/http/dto/send_message.goï¼Œ
åœ¨ frontend/src/types/domain/chat.ts ä¸­ç”Ÿæˆå¯¹åº”çš„ TypeScript æ¥å£ã€‚
ä¿æŒå­—æ®µåä¸ json tag ä¸€è‡´ã€‚"
```

##### é…ç½® `.cursorrules` è‡ªåŠ¨åŒ–

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.cursorrules` ä¸­æ·»åŠ è§„åˆ™ï¼š

```markdown
## å‰åç«¯ç±»å‹åŒæ­¥

å½“ç”¨æˆ·è¦æ±‚ "åŒæ­¥ç±»å‹" æˆ– "sync types {domain}" æ—¶ï¼š

1. è¯»å– backend/domains/{domain}/http/dto ä¸‹çš„æ‰€æœ‰ Go struct
2. æå– json tag ä½œä¸º TypeScript å­—æ®µå
3. ç±»å‹æ˜ å°„ï¼š
   - string â†’ string
   - int/int64/float64 â†’ number
   - bool â†’ boolean
   - time.Time â†’ string (ISO 8601)
   - []T â†’ T[]
   - map[string]T â†’ Record<string, T>
   - struct â†’ interface
4. ç”Ÿæˆ/æ›´æ–° frontend/src/types/domain/{domain}.ts
5. æ·»åŠ æ³¨é‡Šï¼š// Code generated from Go. DO NOT EDIT manually.

ç¤ºä¾‹ï¼š
ç”¨æˆ·: "sync types chat"
AI: è¯»å– backend/domains/chat/http/dto/*.goï¼Œç”Ÿæˆ frontend/src/types/domain/chat.ts
```

è¿™æ ·ï¼Œä½ åªéœ€è¦å¯¹ Cursor è¯´ **"sync types chat"**ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å®Œæˆç±»å‹åŒæ­¥ã€‚

#### æ¨èå·¥ä½œæµ

**æ—¥å¸¸å¼€å‘**ï¼š
1. ä¿®æ”¹ Go Structï¼ˆå¦‚æ·»åŠ å­—æ®µï¼‰
2. å¯¹ Cursor è¯´ "sync types chat"
3. å‰ç«¯ç«‹å³è·å¾—ç±»å‹æ”¯æŒ

**å¤§è§„æ¨¡é‡æ„**ï¼š
1. è¿è¡Œ `./scripts/sync_types.sh`
2. ç¡®ä¿æ‰€æœ‰é¢†åŸŸçš„ç±»å‹éƒ½å·²åŒæ­¥

**CI é›†æˆ**ï¼š
```bash
# .github/workflows/ci.yml æˆ–å…¶ä»– CI é…ç½®
- name: Check Frontend Types Sync
  run: |
    ./scripts/sync_types.sh
    git diff --exit-code frontend/src/types/
  # å¦‚æœå‰ç«¯ç±»å‹ä¸åŒæ­¥ï¼ŒCI ä¼šå¤±è´¥
```

#### ä¼˜åŠ¿æ€»ç»“

| ç»´åº¦ | ä¼ ç»Ÿæ–¹æ¡ˆï¼ˆæ‰‹åŠ¨ç»´æŠ¤ï¼‰ | tygo + Cursor |
|------|-------------------|--------------|
| **ç»´æŠ¤æˆæœ¬** | é«˜ï¼ˆå‰åç«¯ç±»å‹å®¹æ˜“è„±èŠ‚ï¼‰ | ä½ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ |
| **å¼€å‘ä½“éªŒ** | å·®ï¼ˆéœ€è¦æ‰‹åŠ¨å¯¹ç…§åç«¯æ¥å£ï¼‰ | ä¼˜ï¼ˆç±»å‹å³æ–‡æ¡£ï¼‰ |
| **AI å‹å¥½åº¦** | ä½ï¼ˆAI éœ€è¦çŒœæµ‹ç±»å‹ï¼‰ | é«˜ï¼ˆç±»å‹æ˜ç¡®ï¼‰ |
| **é”™è¯¯å‘ç°** | è¿è¡Œæ—¶ | ç¼–è¯‘æœŸï¼ˆTypeScriptï¼‰ |
| **Source of Truth** | ä¸æ˜ç¡® | Go Code |

### 4.3 DevOps

- **å®¹å™¨åŒ–**ï¼šDocker Composeï¼ˆä¸€é”®å¯åŠ¨ï¼‰
- **é…ç½®**ï¼šç¯å¢ƒå˜é‡ç®¡ç†ï¼ˆ.envï¼‰
- **ç›‘æ§**ï¼šå¥åº·æ£€æŸ¥ç«¯ç‚¹
- **éƒ¨ç½²**ï¼šç¤ºä¾‹ K8s é…ç½®ï¼ˆå¯é€‰ï¼‰

## 5. é¡¹ç›®ç»“æ„ (Project Structure)

### 5.1 æ€»ä½“ç»“æ„ï¼ˆMonorepoï¼‰

**è®¾è®¡ç†å¿µ**ï¼šMonorepo + Domain-First + Cross-Platform Type Safety

```
go-genai-stack/                          # Monorepo æ ¹ç›®å½•
â”œâ”€â”€ backend/                             # åç«¯ï¼ˆGo + Hertz + Eino + DDDï¼‰
â”œâ”€â”€ web/                                 # Web å‰ç«¯ï¼ˆReact + TypeScript + shadcn/uiï¼‰
â”œâ”€â”€ mobile/                              # ç§»åŠ¨ç«¯ï¼ˆReact Native + TypeScriptï¼‰
â”œâ”€â”€ shared/                              # è·¨é¡¹ç›®å…±äº«ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ scripts/                             # é¡¹ç›®çº§è„šæœ¬
â”‚   â”œâ”€â”€ sync_types.sh                    # ç±»å‹åŒæ­¥
â”‚   â”œâ”€â”€ dev_all.sh                       # å¯åŠ¨æ‰€æœ‰æœåŠ¡
â”‚   â””â”€â”€ test_all.sh                      # æµ‹è¯•æ‰€æœ‰é¡¹ç›®
â”œâ”€â”€ docs/                                # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ optimal-architecture.md          # æœ€ä¼˜æ¶æ„è®¾è®¡
â”‚   â”œâ”€â”€ vibe-coding-ddd-structure.md
â”‚   â””â”€â”€ ai_workflow.md
â”œâ”€â”€ docker-compose.yml                   # ä¸€é”®å¯åŠ¨
â”œâ”€â”€ tygo.yaml                            # ç±»å‹åŒæ­¥é…ç½®
â”œâ”€â”€ .cursorrules                         # Cursor AI è§„åˆ™
â””â”€â”€ README.md
```

**ä¸ºä»€ä¹ˆé€‰æ‹© Monorepoï¼Ÿ**

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| **ç»Ÿä¸€ç‰ˆæœ¬** | Backendã€Webã€Mobile ç‰ˆæœ¬ä¸€è‡´ |
| **ç±»å‹å…±äº«** | Go â†’ TypeScriptï¼Œä¸€æ¬¡ç”Ÿæˆï¼Œå¤šç«¯ä½¿ç”¨ |
| **åŸå­æäº¤** | æ¥å£å˜æ›´å’Œå‰ç«¯è°ƒæ•´åœ¨åŒä¸€ä¸ª PR |
| **AI å‹å¥½** | Cursor å¯ä»¥çœ‹åˆ°å®Œæ•´ä¸Šä¸‹æ–‡ |
| **ç®€åŒ– CI/CD** | ä¸€æ¬¡æ„å»ºï¼Œéƒ¨ç½²æ‰€æœ‰æœåŠ¡ |

**è¯¦ç»†æ¶æ„è®¾è®¡**ï¼šå‚è§ [Vibe Coding æœ€ä¼˜æ¶æ„æ–‡æ¡£](docs/optimal-architecture.md)

### 5.2 åç«¯ç»“æ„ï¼ˆVibe Coding Friendly DDDï¼‰

**æ ¸å¿ƒç‰¹ç‚¹**ï¼šé¢†åŸŸä¼˜å…ˆï¼ˆDomain-Firstï¼‰+ è‡ªåŒ…å«ï¼ˆSelf-containedï¼‰+ æ˜¾å¼çŸ¥è¯†ï¼ˆExplicit Knowledgeï¼‰

> ğŸ’¡ **é‡è¦è¯´æ˜**ï¼šè¿™ä¸æ˜¯ä¼ ç»Ÿçš„ DDD æ¶æ„ï¼  
> **Vibe Coding Friendly DDD** æ˜¯"ä»¥é¢†åŸŸä¸ºç¬¬ä¸€ç­‰å…¬æ°‘çš„æ¨¡å—åŒ– DDD"ï¼Œä¸“ä¸º AI è¾…åŠ©ç¼–ç¨‹ä¼˜åŒ–ã€‚

#### ä»€ä¹ˆæ˜¯ Vibe Coding Friendly DDDï¼Ÿ

**å®šä¹‰**ï¼šVibe Coding Friendly DDD æ˜¯**"ä»¥é¢†åŸŸä¸ºç¬¬ä¸€ç­‰å…¬æ°‘çš„æ¨¡å—åŒ– DDD"** â€”â€” æŠŠæ¯ä¸ª Bounded Context åšæˆè‡ªåŒ…å«çš„ã€å¯å£°æ˜åŒ–ã€å¯è¯»æ€§æå¼ºçš„é¢†åŸŸç›®å½•ï¼Œå¹¶æŠŠé¢†åŸŸçŸ¥è¯†ï¼ˆREADMEã€glossaryã€rulesã€usecases.yamlã€events ç­‰ï¼‰**æ˜¾å¼åŒ–**ï¼Œä»¥ä¾¿äººç±»ä¸ LLM ä¸€æ¬¡ ingestã€ä¸€æ¬¡ç†è§£ã€ä¸€æ¬¡ä¿®æ”¹å¹¶å®‰å…¨è½åœ°ã€‚

**æ ¸å¿ƒç†å¿µ**ï¼š
- **é¢†åŸŸçŸ¥è¯†æ˜¾å¼åŒ–** > ä»£ç é€»è¾‘ï¼šæŠŠä¸šåŠ¡è§„åˆ™ã€æœ¯è¯­ã€æµç¨‹å˜æˆæœºå™¨å¯è¯»çš„æ–‡æ¡£+å£°æ˜ï¼Œè€Œä¸æ˜¯åŸ‹åœ¨ä»£ç é‡Œ
- **è‡ªåŒ…å«çš„é¢†åŸŸæ¨¡å—**ï¼šæ¯ä¸ªé¢†åŸŸç›®å½•åŒ…å«æ¨¡å‹ã€ç”¨ä¾‹ã€äº‹ä»¶ã€è§„åˆ™ã€æ¥å£ã€å®ç°ã€æµ‹è¯•
- **å£°æ˜å¼ç”¨ä¾‹**ï¼šç”¨ `usecases.yaml` å£°æ˜ä¸šåŠ¡æµç¨‹ï¼ŒLLM å¯ä»¥ç›´æ¥è¯»å–å¹¶ç”Ÿæˆ/ä¿®æ”¹ä»£ç 
- **å‘é‡åŒ–å‹å¥½**ï¼šé¢†åŸŸæ–‡æ¡£çŸ­å°ã€ç»“æ„åŒ–ï¼Œä¾¿äºæŠ•å…¥å‘é‡æ•°æ®åº“åš RAG æ£€ç´¢

**ä¸ä¼ ç»Ÿ DDD çš„æ ¸å¿ƒåŒºåˆ«**ï¼š

| ç»´åº¦ | ä¼ ç»Ÿ DDD | Vibe Coding Friendly DDD |
|------|---------|-------------------------|
| **è®¾è®¡ç›®æ ‡** | å¤æ‚ä¸šåŠ¡å»ºæ¨¡ã€å›¢é˜Ÿåä½œ | **AI å¯ç†è§£ + å¤æ‚ä¸šåŠ¡å»ºæ¨¡** |
| **ç›®å½•å‘½å** | æŠ½è±¡æ¦‚å¿µï¼ˆå¦‚ `aggregate`ï¼‰ | **è¯­ä¹‰åŒ–ã€è‡ªè§£é‡Š**ï¼ˆå¦‚ `model_router_service.go`ï¼‰ |
| **æ–‡ä»¶æ³¨é‡Š** | å¯é€‰ï¼Œä¾èµ–å›¢é˜Ÿè§„èŒƒ | **å¿…éœ€ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä½¿ç”¨ç¤ºä¾‹** |
| **æ–‡ä»¶å¤§å°** | å¯èƒ½å¾ˆå¤§ï¼ˆèšåˆæ ¹ 1000+ è¡Œï¼‰ | **æ¯ä¸ªæ–‡ä»¶ < 300 è¡Œï¼ŒèŒè´£å•ä¸€** |
| **ä¾èµ–æ³¨å…¥** | å¯èƒ½ç”¨ DI å®¹å™¨ | **æ˜¾å¼æ„é€ å‡½æ•°ï¼ŒAI å¯è§** |
| **README** | é¡¹ç›®çº§ README | **æ¯ä¸ªé¢†åŸŸç›®å½•éƒ½æœ‰ README** |
| **ä»£ç ç¤ºä¾‹** | æ–‡æ¡£ä¸­æä¾› | **ä»£ç æ³¨é‡Šä¸­ç›´æ¥åŒ…å« Example** |
| **å­¦ä¹ æ›²çº¿** | é™¡å³­ï¼ˆDDD æ¦‚å¿µå¤æ‚ï¼‰ | **å¹³ç¼“ï¼ˆAI è¾…åŠ©ç†è§£ï¼‰** |

#### ä¸ºä»€ä¹ˆéœ€è¦åˆ›é€ è¿™ä¸ªæ–°çš„æ¶æ„å˜ä½“ï¼Ÿ

**è®¾è®¡åŠ¨æœº**ï¼š
1. **LLM åœ¨å¤„ç†å±€éƒ¨å®Œæ•´ä¸Šä¸‹æ–‡æ—¶æ•ˆæœæœ€å¥½**ï¼šæ•£è½çš„æ¨ªå‘å±‚æ¬¡ä¼šå¢åŠ è®¤çŸ¥è´Ÿæ‹…
2. **Vibe Coding è¦å®ç°"ä¸€å¥è¯ä¿®æ”¹ç³»ç»Ÿ"**ï¼šAI å¿…é¡»èƒ½å¿«é€Ÿå®šä½ä¸šåŠ¡å…¥å£ã€è§„åˆ™å’Œè¾¹ç•Œ
3. **æ˜¾å¼åŒ–ä¼˜äºéšå¼**ï¼šæŠŠä¸šåŠ¡çŸ¥è¯†å˜æˆæœºå™¨å¯è¯»çš„"æ–‡æ¡£+å£°æ˜"æ¯”åŸ‹åœ¨ä»£ç é‡Œæ›´é‡è¦
4. **å£°æ˜ä¼˜äºå®ç°**ï¼šç”¨ä¾‹çš„æ­¥éª¤å£°æ˜åŒ–åï¼ŒLLM èƒ½ç›´æ¥è¯»å¹¶ç”Ÿæˆ/ä¿®æ”¹å®ç°

**æ¼”è¿›å†ç¨‹**ï¼š
```
ä¼ ç»Ÿ MVCï¼ˆ2000sï¼‰
    â†“ é—®é¢˜ï¼šä¸šåŠ¡é€»è¾‘åˆ†æ•£ã€ä»£ç è€¦åˆä¸¥é‡
    
ä¼ ç»Ÿ DDDï¼ˆ2004-è‡³ä»Šï¼‰
    â†“ ä¼˜åŠ¿ï¼šé¢†åŸŸè¾¹ç•Œæ¸…æ™°ã€ä¸šåŠ¡å†…èš
    â†“ é—®é¢˜ï¼šæ¦‚å¿µæŠ½è±¡ã€å­¦ä¹ æ›²çº¿é™¡å³­ã€æ¨ªå‘åˆ†å±‚å¯¹ AI ä¸å‹å¥½
    
Vibe Coding Friendly DDDï¼ˆ2024-AI æ—¶ä»£ï¼‰
    â†“ åˆ›æ–°ï¼šé¢†åŸŸä¼˜å…ˆ + æ˜¾å¼çŸ¥è¯† + å£°æ˜å¼ç”¨ä¾‹ + AI åä½œ
    âœ… ç›®æ ‡ï¼šç”¨ä¸€å¥è¯æè¿°éœ€æ±‚ â†’ AI è‡ªåŠ¨æ”¹ä»£ç /æµ‹è¯• â†’ å®‰å…¨è½åœ°
```

**ä¼ ç»Ÿ MVC çš„é—®é¢˜**ï¼š
- âŒ ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨ Controller/Service/Modelï¼Œéš¾ä»¥ç»´æŠ¤
- âŒ ç¼ºä¹æ¸…æ™°çš„é¢†åŸŸè¾¹ç•Œï¼Œä»£ç è€¦åˆä¸¥é‡
- âŒ AI å®Œå…¨æ— æ³•ç†è§£ä»£ç ç»“æ„ï¼ˆæ— è§„å¾‹å¯å¾ªï¼‰

**ä¼ ç»Ÿ DDD çš„é—®é¢˜**ï¼ˆé’ˆå¯¹ AIï¼‰ï¼š
- âš ï¸ æ¦‚å¿µè¿‡äºæŠ½è±¡ï¼ˆAggregate Rootã€Bounded Contextã€Specificationï¼‰
- âš ï¸ ç›®å½•å‘½åå­¦æœ¯åŒ–ï¼ˆ`aggregate/`ã€`specification/`ã€`factory/`ï¼‰
- âš ï¸ ç¼ºå°‘æ ‡å‡†åŒ–çš„æ³¨é‡Šå’Œç¤ºä¾‹
- âš ï¸ AI éœ€è¦å¤§é‡ä¸Šä¸‹æ–‡æ‰èƒ½ç†è§£
- âš ï¸ AI ç”Ÿæˆçš„ä»£ç ç»å¸¸ä¸ç¬¦åˆ DDD æ¨¡å¼

**Vibe Coding Friendly DDD çš„ 7 å¤§æ ¸å¿ƒåŸåˆ™**ï¼š

1. **åŸåˆ™ 1ï¼šé¢†åŸŸä¼˜å…ˆï¼ˆDomain-firstï¼‰**
   ```
   ä¼ ç»Ÿåˆ†å±‚: interfaces/ â†’ application/ â†’ domain/ â†’ infrastructure/
   ï¼ˆæ¨ªå‘åˆ‡åˆ†ï¼ŒAI éœ€è¦è·¨å¤šä¸ªç›®å½•æ‰èƒ½ç†è§£å®Œæ•´ä¸šåŠ¡ï¼‰
   
   Vibe Coding: 
   /chat/       â† èŠå¤©é¢†åŸŸï¼ˆè‡ªåŒ…å«ï¼‰
   /llm/        â† LLM é¢†åŸŸï¼ˆè‡ªåŒ…å«ï¼‰
   /monitoring/ â† ç›‘æ§é¢†åŸŸï¼ˆè‡ªåŒ…å«ï¼‰
   ï¼ˆå‚ç›´åˆ‡åˆ†ï¼ŒAI åœ¨ä¸€ä¸ªç›®å½•å°±èƒ½ç†è§£å®Œæ•´ä¸šåŠ¡ï¼‰
   
   â†’ AI æ— éœ€è·¨ç›®å½•è·³è½¬
   â†’ é™ä½è®¤çŸ¥è´Ÿæ‹…
   ```

2. **åŸåˆ™ 2ï¼šè‡ªåŒ…å«ï¼ˆSelf-containedï¼‰**
   ```
   æ¯ä¸ªé¢†åŸŸç›®å½•åŒ…å«å®Œæ•´çš„ï¼š
   - æ¨¡å‹ï¼ˆmodel.goï¼‰
   - ç”¨ä¾‹ï¼ˆhandlers/ï¼‰
   - äº‹ä»¶ï¼ˆevents.mdï¼‰
   - è§„åˆ™ï¼ˆrules.mdï¼‰
   - æ¥å£ï¼ˆhttp/ã€grpc/ï¼‰
   - ä»“å‚¨ï¼ˆrepository.goã€repository_impl.goï¼‰
   - æµ‹è¯•ï¼ˆtests/ï¼‰
   
   â†’ ä¿®æ”¹ä¸€ä¸ªé¢†åŸŸæ— éœ€æ”¹åŠ¨å…¶ä»–é¢†åŸŸ
   â†’ AI å¯ä»¥ç‹¬ç«‹ç†è§£å’Œä¿®æ”¹
   ```

3. **åŸåˆ™ 3ï¼šæ˜¾å¼çŸ¥è¯†ï¼ˆExplicit Knowledgeï¼‰**
   ```
   æ¯ä¸ªé¢†åŸŸå¿…é¡»æœ‰çš„æ–‡æ¡£ï¼š
   - README.md       â† é¢†åŸŸæ¦‚è§ˆï¼ˆ500å­—ä»¥å†…ï¼Œé¦–è¯»å…¥å£ï¼‰
   - glossary.md     â† æœ¯è¯­è¡¨ï¼ˆUbiquitous Languageï¼‰
   - rules.md        â† ä¸šåŠ¡è§„åˆ™ï¼ˆæ¡ä»¶â†’è¡Œä¸ºâ†’é”™è¯¯ç ï¼‰
   - events.md       â† é¢†åŸŸäº‹ä»¶æ¸…å•
   - usecases.yaml   â† ç”¨ä¾‹å£°æ˜ï¼ˆå…³é”®ï¼ï¼‰
   
   â†’ æŠŠé¢†åŸŸçŸ¥è¯†ä»ä»£ç ä¸­æŠ½ç¦»
   â†’ LLM å¯ä»¥ç›´æ¥ ingest è¿™äº›æ–‡æ¡£
   â†’ å‘é‡åŒ–å‹å¥½ï¼ˆä¾¿äº RAG æ£€ç´¢ï¼‰
   ```

4. **åŸåˆ™ 4ï¼šå¯å£°æ˜æµç¨‹ï¼ˆDeclarative UseCasesï¼‰**
   ```yaml
   # usecases.yaml
   CreateOrder:
     description: "åˆ›å»ºè®¢å•å¹¶æ‰£æ¬¾"
     sensitivity: high  # é«˜æ•æ„Ÿåº¦ï¼Œéœ€è¦äººå·¥å®¡æ ¸
     steps:
       - ValidateInputs      # éªŒè¯è¾“å…¥
       - ReserveInventory    # é¢„ç•™åº“å­˜
         on_fail: abort
       - ChargePayment       # æ‰£æ¬¾
         on_fail: compensate: RefundPayment
       - PublishOrderCreated # å‘å¸ƒäº‹ä»¶
   
   â†’ LLM è¯»å–åè‡ªåŠ¨ç”Ÿæˆ handler ä»£ç 
   â†’ LLM è¯»å–åè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
   â†’ äººç±»å¯å¿«é€Ÿç†è§£ä¸šåŠ¡æµç¨‹
   ```

5. **åŸåˆ™ 5ï¼šæœ€å° ceremony**
   ```
   âŒ é¿å…ï¼šè¿‡åº¦æŠ½è±¡ï¼ˆFactoryã€Specificationã€Policy ç­‰ï¼‰
   âœ… ä¿ç•™ï¼šèƒ½äº§ç”Ÿä»·å€¼çš„æŠ½è±¡
   
   åªä¿ç•™ï¼š
   - Entityï¼ˆå®ä½“ï¼‰
   - ValueObjectï¼ˆå€¼å¯¹è±¡ï¼‰
   - Repositoryï¼ˆä»“å‚¨ï¼‰
   - Serviceï¼ˆé¢†åŸŸæœåŠ¡ï¼Œä»…è·¨å®ä½“é€»è¾‘ï¼‰
   - Handlerï¼ˆç”¨ä¾‹å¤„ç†å™¨ï¼‰
   
   â†’ å‡å°‘ AI éœ€è¦ç†è§£çš„æ¦‚å¿µ
   â†’ æå‡ AI ç”Ÿæˆå‡†ç¡®åº¦
   ```

6. **åŸåˆ™ 6ï¼šå¯è§‚æµ‹ä¸å¯å›æº¯**
```go
   // è®°å½• AI å†³ç­–è½¨è¿¹
   type AIDecision struct {
       DecisionID   string
       Prompt       string     // AI æ¥æ”¶çš„ prompt
       GeneratedCode string    // AI ç”Ÿæˆçš„ä»£ç 
       Timestamp    time.Time
       Approved     bool       // æ˜¯å¦è¢«äººå·¥æ‰¹å‡†
   }
   
   // æ‰€æœ‰å…³é”®äº‹ä»¶åŒ…å« AI å†³ç­– ID
   event.Publish("OrderCreated", OrderCreatedEvent{
       OrderID:      orderID,
       AIDecisionID: decisionID,  // å¯è¿½æº¯
   })
   
   â†’ å¯è¿½æº¯ AI çš„æ¯æ¬¡ä¿®æ”¹
   â†’ ä¾¿äºå®¡è®¡å’Œå›æ»š
   ```

7. **åŸåˆ™ 7ï¼šå‘é‡åŒ–å‹å¥½**
   ```
   æ–‡æ¡£è®¾è®¡åŸåˆ™ï¼š
   - æ¯ä¸ªæ–‡æ¡£ < 2000 å­—
   - ç»“æ„åŒ–ï¼ˆMarkdownã€YAMLï¼‰
   - çŸ­æ®µè½ï¼ˆæ¯æ®µ < 200 å­—ï¼‰
   - æ˜ç¡®çš„æ ‡é¢˜å’Œç´¢å¼•
   
   â†’ ä¾¿äºåˆ‡åˆ†æˆ chunks æŠ•å…¥å‘é‡æ•°æ®åº“
   â†’ æå‡ RAG æ£€ç´¢å‡†ç¡®åº¦
   â†’ AI å¯ä»¥å¿«é€Ÿå®šä½ç›¸å…³çŸ¥è¯†
   ```

**ä»·å€¼æ€»ç»“**ï¼š
- âœ… **ä¿ç•™ DDD çš„ä¼˜åŠ¿**ï¼šé¢†åŸŸè¾¹ç•Œã€åˆ†å±‚æ¶æ„ã€ä¸šåŠ¡é€»è¾‘å†…èš
- âœ… **é’ˆå¯¹ AI ä¼˜åŒ–**ï¼šè¯­ä¹‰åŒ–å‘½åã€å®Œæ•´æ³¨é‡Šã€ä½¿ç”¨ç¤ºä¾‹ã€æ ‡å‡†åŒ–æ¨¡å¼
- âœ… **é™ä½é—¨æ§›**ï¼šæ–°æ‰‹ + AI = å¯ä»¥å¿«é€Ÿç†è§£å’Œæ‰©å±•å¤æ‚ä¸šåŠ¡
- âœ… **æå‡æ•ˆç‡**ï¼šAI ç”Ÿæˆä»£ç å‡†ç¡®åº¦ä» 30% â†’ 80%+ï¼ˆå®æµ‹æ•°æ®ï¼‰
- âœ… **é€‚åˆç°ä»£å¼€å‘**ï¼šAI è¾…åŠ©ç¼–ç¨‹å·²æ˜¯ä¸»æµï¼Œæ¶æ„å¿…é¡»é€‚åº”

#### æ˜¾å¼çŸ¥è¯†æ–‡ä»¶è¯¦è§£ï¼ˆæ¯ä¸ªé¢†åŸŸå¿…é¡»æœ‰ï¼‰

Vibe Coding Friendly DDD çš„æ ¸å¿ƒæ˜¯æŠŠé¢†åŸŸçŸ¥è¯†æ˜¾å¼åŒ–ã€‚æ¯ä¸ªé¢†åŸŸç›®å½•å¿…é¡»åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š

##### 1. **README.md**ï¼ˆé¢†åŸŸæ¦‚è§ˆï¼Œé¦–è¯»å…¥å£ï¼‰
```markdown
# Chat Domain

## ä¸€å¥è¯æ¦‚è¿°
ç®¡ç†ç”¨æˆ·ä¸ AI çš„å¤šè½®å¯¹è¯ï¼ŒåŒ…æ‹¬æ¶ˆæ¯éªŒè¯ã€Context ç®¡ç†ã€å†å²æŒä¹…åŒ–ã€‚

## æ ¸å¿ƒç”¨ä¾‹
- CreateConversation: åˆ›å»ºæ–°å¯¹è¯
- SendMessage: å‘é€æ¶ˆæ¯å¹¶è·å– AI å“åº”
- ManageContext: ç®¡ç† Context çª—å£å¤§å°

## ä¸»è¦èšåˆ
- Conversationï¼ˆå¯¹è¯å®ä½“ï¼‰
- Messageï¼ˆæ¶ˆæ¯å®ä½“ï¼‰

## ä¸»è¦äº‹ä»¶
- ConversationCreated
- MessageSent
- ContextTrimmed

## å¿«é€Ÿé“¾æ¥
- [æœ¯è¯­è¡¨](glossary.md)
- [ä¸šåŠ¡è§„åˆ™](rules.md)
- [ç”¨ä¾‹å£°æ˜](usecases.yaml)
- [äº‹ä»¶æ¸…å•](events.md)
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼šAI çš„ç¬¬ä¸€è¯»å…¥å£ï¼Œ500å­—å†…å¿«é€Ÿç†è§£é¢†åŸŸè¾¹ç•Œã€‚

---

##### 2. **glossary.md**ï¼ˆæœ¯è¯­è¡¨ï¼ŒUbiquitous Languageï¼‰
```markdown
# Chat Domain Glossary

| æœ¯è¯­ | å®šä¹‰ | ç›¸å…³å®ä½“/äº‹ä»¶ |
|-----|------|-------------|
| Conversation | ç”¨æˆ·ä¸ AI çš„å®Œæ•´å¯¹è¯ä¼šè¯ | Conversation å®ä½“ |
| Message | å•æ¡æ¶ˆæ¯ï¼ˆç”¨æˆ·æˆ– AIï¼‰ | Message å®ä½“ |
| Context Window | LLM çš„ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ | ContextManager æœåŠ¡ |
| Token | LLM çš„è®¡è´¹å•ä½ | tiktoken åº“ |
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼šç»Ÿä¸€é¢†åŸŸè¯­è¨€ï¼ŒLLM å¯ç”¨ä½œ prompt context çš„è¯å…¸ã€‚

---

##### 3. **rules.md**ï¼ˆä¸šåŠ¡è§„åˆ™ï¼Œå¯æµ‹è¯•ï¼‰
```markdown
# Chat Domain Rules

## è§„åˆ™åˆ—è¡¨

### RULE-001: Message ä¸èƒ½ä¸ºç©º
**æ¡ä»¶**: ç”¨æˆ·å‘é€æ¶ˆæ¯  
**æœŸæœ›**: Message é•¿åº¦ > 0  
**é”™è¯¯ç **: `MESSAGE_EMPTY`

### RULE-002: Context çª—å£é™åˆ¶
**æ¡ä»¶**: å¯¹è¯å†å²è¶…è¿‡æ¨¡å‹é™åˆ¶  
**æœŸæœ›**: è‡ªåŠ¨è£å‰ªæœ€æ—§çš„æ¶ˆæ¯  
**è¡¥å¿**: ä¿ç•™ System Message

### RULE-003: æ•æ„Ÿè¯è¿‡æ»¤
**æ¡ä»¶**: Message åŒ…å«æ•æ„Ÿè¯  
**æœŸæœ›**: æ‹’ç»æ¶ˆæ¯å¹¶è¿”å› `MESSAGE_FILTERED`  
**å®¡è®¡**: è®°å½•åˆ° audit log
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
- LLM ç”Ÿæˆä»£ç æ—¶ä¼šéµå¾ªè¿™äº›è§„åˆ™
- å¯è‡ªåŠ¨ç”Ÿæˆè§„åˆ™æµ‹è¯•ç”¨ä¾‹
- äººç±»å¯å¿«é€Ÿç†è§£ä¸šåŠ¡çº¦æŸ

---

##### 4. **events.md**ï¼ˆé¢†åŸŸäº‹ä»¶æ¸…å•ï¼‰
```markdown
# Chat Domain Events

## ConversationCreated
**è§¦å‘æ—¶æœº**: ç”¨æˆ·åˆ›å»ºæ–°å¯¹è¯  
**Payload**:
```go
type ConversationCreatedEvent struct {
    ConversationID string
    UserID         string
    CreatedAt      time.Time
}
```
**æ¶ˆè´¹è€…**: Analytics æœåŠ¡ã€Monitoring æœåŠ¡

## MessageSent
**è§¦å‘æ—¶æœº**: ç”¨æˆ·å‘é€æ¶ˆæ¯æˆåŠŸ  
**Payload**:
```go
type MessageSentEvent struct {
    MessageID      string
    ConversationID string
    Role           string // "user" or "assistant"
    Tokens         int
}
```
**æ¶ˆè´¹è€…**: Billing æœåŠ¡ã€Analytics æœåŠ¡
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼šæ˜ç¡®äº‹ä»¶å¥‘çº¦ï¼ŒLLM å¯è‡ªåŠ¨ç”Ÿæˆäº‹ä»¶å‘å¸ƒ/è®¢é˜…ä»£ç ã€‚

---

##### 5. **usecases.yaml**ï¼ˆç”¨ä¾‹å£°æ˜ï¼Œå…³é”®ï¼ï¼‰
```yaml
# Chat Domain Use Cases

SendMessage:
  description: "ç”¨æˆ·å‘é€æ¶ˆæ¯å¹¶è·å– AI å“åº”"
  sensitivity: medium  # æ•æ„Ÿåº¦ï¼ˆlow/medium/highï¼‰
  
  steps:
    - name: ValidateMessage
      type: sync
      on_fail: abort
      errors:
        - MESSAGE_EMPTY
        - MESSAGE_FILTERED
    
    - name: LoadHistory
      type: sync
      description: "åŠ è½½å¯¹è¯å†å²"
    
    - name: TrimContext
      type: sync
      description: "è£å‰ª Context çª—å£"
      on_fail: warn
    
    - name: CallLLM
      type: external
      adapter: einoClient.chat
      timeout: 30s
      on_fail: retry
      retry_count: 3
      retry_backoff: exponential
    
    - name: SaveMessage
      type: sync
      on_fail: compensate
      compensation: RollbackConversation
    
    - name: PublishMessageSent
      type: event
      event: MessageSent
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
- LLM å¯ç›´æ¥è¯»å–å¹¶ç”Ÿæˆ handler ä»£ç 
- LLM å¯è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
- å£°æ˜å¼è¡¨è¾¾ä¸šåŠ¡æµç¨‹ï¼Œä¾¿äºä¿®æ”¹
- æ”¯æŒé”™è¯¯å¤„ç†ã€é‡è¯•ã€è¡¥å¿ç­‰é€»è¾‘

---

##### 6. **ai-metadata.json**ï¼ˆAI ingestion å…ƒæ•°æ®ï¼‰
```json
{
  "domain": "chat",
  "version": "1.0.0",
  "lastUpdated": "2025-11-22",
  "sensitivity": "medium",
  "vectorTags": ["chat", "conversation", "message", "llm"],
  "primaryAggregates": ["Conversation", "Message"],
  "primaryUseCases": ["SendMessage", "CreateConversation"],
  "dependencies": ["llm", "monitoring"]
}
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
- ä¾¿äºå‘é‡åŒ– ingestion
- å¿«é€Ÿç´¢å¼•å’Œæ£€ç´¢
- ç‰ˆæœ¬ç®¡ç†

#### Vibe Coding Friendly DDD vs ä¼ ç»Ÿ DDD æ¦‚å¿µæ˜ å°„

| ä¼ ç»Ÿ DDD æ¦‚å¿µ | Vibe Coding Friendly å®ç° | ä¸ºä»€ä¹ˆæ”¹å˜ |
|-------------|------------------------|---------|
| **Aggregate Root** | `entity/conversation.go` | "Aggregate" å¯¹ AI å¤ªæŠ½è±¡ |
| **Entity** | `entity/message.go` | ä¿ç•™ï¼Œæ¸…æ™°æ˜“æ‡‚ |
| **Value Object** | `valueobject/message_role.go` | ä¿ç•™ï¼Œæ¸…æ™°æ˜“æ‡‚ |
| **Repository** | `repository/conversation_repository.go` | ä¿ç•™ï¼Œæ¸…æ™°æ˜“æ‡‚ |
| **Domain Service** | `service/context_manager_service.go` | ä¿ç•™ï¼Œä½†æ›´å…·ä½“çš„å‘½å |
| **Specification** | `service/message_validator_service.go` | "Specification" å¤ªå­¦æœ¯åŒ– |
| **Factory** | `New...()` æ„é€ å‡½æ•° | ä¸éœ€è¦å•ç‹¬çš„ Factory ç›®å½• |
| **Bounded Context** | é¢†åŸŸç›®å½•ï¼ˆ`domain/chat/`ï¼‰ | ç”¨ç›®å½•è¡¨è¾¾ï¼Œæ›´ç›´è§‚ |
| **Application Service** | `application/service/chat_application_service.go` | ä¿ç•™ï¼Œä½†å¼ºè°ƒ"Application" |
| **Infrastructure** | `infrastructure/persistence/postgres/` | ä¿ç•™ï¼Œæ˜ç¡®æ˜¯å¤–éƒ¨ä¾èµ– |

#### é¡¹ç›®ç»“æ„æ¦‚è§ˆ

å®Œæ•´çš„ç›®å½•ç»“æ„å’Œè®¾è®¡è¯´æ˜è¯·å‚è€ƒï¼š**[Vibe Coding Friendly DDD å®Œæ•´ç»“æ„æ–‡æ¡£](docs/vibe-coding-ddd-structure.md)**

**æ ¸å¿ƒå˜åŒ–**ï¼š

| ç»´åº¦ | ä¼ ç»Ÿ DDD | Vibe Coding Friendly DDD |
|------|---------|-------------------------|
| **ç»„ç»‡æ–¹å¼** | æ¨ªå‘åˆ†å±‚ï¼ˆinterfaces/application/domainï¼‰ | **å‚ç›´é¢†åŸŸï¼ˆdomains/chat/ã€domains/llm/ï¼‰** |
| **é¢†åŸŸç›®å½•** | åˆ†æ•£åœ¨ä¸åŒå±‚ | **è‡ªåŒ…å«ï¼ˆmodel+handler+http+testsï¼‰** |
| **æ˜¾å¼çŸ¥è¯†** | æ— æˆ–æå°‘ | **å¿…é¡»æœ‰ï¼šREADMEã€glossaryã€rulesã€usecases.yamlã€events** |
| **ç”¨ä¾‹å®šä¹‰** | ä»£ç ä¸­éšå¼ | **usecases.yaml å£°æ˜å¼** |
| **AI ingestion** | éš¾ | **å‘é‡åŒ–å‹å¥½ï¼ˆai-metadata.jsonï¼‰** |

**ä¸ coze-studio çš„å¯¹æ¯”**ï¼š

| ç»´åº¦ | coze-studio | Vibe Coding Friendly DDD |
|------|------------|-------------------------|
| **ä»£ç ç»„ç»‡** | ä¼ ç»Ÿ DDDï¼ˆæ¨ªå‘åˆ†å±‚ï¼‰ | é¢†åŸŸä¼˜å…ˆï¼ˆå‚ç›´è‡ªåŒ…å«ï¼‰ |
| **é¢†åŸŸçŸ¥è¯†** | éƒ¨åˆ†æ–‡æ¡£ | **æ˜¾å¼åŒ–ï¼ˆ6 ä¸ªå¿…éœ€æ–‡ä»¶ï¼‰** |
| **ç”¨ä¾‹é©±åŠ¨** | ä»£ç é©±åŠ¨ | **å£°æ˜å¼ï¼ˆusecases.yamlï¼‰** |
| **AI å‹å¥½åº¦** | ä¸­ç­‰ | **é«˜ï¼ˆä¸“é—¨ä¼˜åŒ–ï¼‰** |

**ç®€åŒ–ç¤ºä¾‹**ï¼ˆå®Œæ•´ç»“æ„è§ [è¯¦ç»†æ–‡æ¡£](docs/vibe-coding-ddd-structure.md)ï¼‰ï¼š

```
backend/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go
â”‚
â”œâ”€â”€ domains/                                           # ã€é¢†åŸŸç›®å½•ã€‘ç¬¬ä¸€ç­‰å…¬æ°‘
â”‚   â”‚
â”‚   â”œâ”€â”€ chat/                                          # ã€èŠå¤©é¢†åŸŸã€‘è‡ªåŒ…å«çš„ Bounded Context
â”‚   â”‚   â”œâ”€â”€ README.md                                  # âœ… å¿…é¡»ï¼šé¢†åŸŸæ¦‚è§ˆï¼ˆ500 å­—å†…ï¼‰
â”‚   â”‚   â”œâ”€â”€ glossary.md                                # âœ… å¿…é¡»ï¼šæœ¯è¯­è¡¨
â”‚   â”‚   â”œâ”€â”€ rules.md                                   # âœ… å¿…é¡»ï¼šä¸šåŠ¡è§„åˆ™
â”‚   â”‚   â”œâ”€â”€ events.md                                  # âœ… å¿…é¡»ï¼šé¢†åŸŸäº‹ä»¶æ¸…å•
â”‚   â”‚   â”œâ”€â”€ usecases.yaml                              # âœ… å¿…é¡»ï¼šç”¨ä¾‹å£°æ˜ï¼ˆå…³é”®ï¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ ai-metadata.json                           # âœ… å¿…é¡»ï¼šAI ingestion å…ƒæ•°æ®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ model/                                     # é¢†åŸŸæ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation.go                        # å¯¹è¯èšåˆæ ¹
â”‚   â”‚   â”‚   â”œâ”€â”€ message.go                             # æ¶ˆæ¯å®ä½“
â”‚   â”‚   â”‚   â””â”€â”€ message_role.go                        # å€¼å¯¹è±¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ repository.go                              # ä»“å‚¨æ¥å£ï¼ˆåœ¨é¢†åŸŸå†…ï¼‰
â”‚   â”‚   â”œâ”€â”€ repository_impl.go                         # ä»“å‚¨å®ç°ï¼ˆæ ‡è®°ä¸º infraï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                                  # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ context_manager.go
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ handlers/                                  # ç”¨ä¾‹å¤„ç†å™¨ï¼ˆå¯¹åº” usecases.yamlï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ send_message.handler.go                # â† å¯¹åº” SendMessage ç”¨ä¾‹
â”‚   â”‚   â”‚   â””â”€â”€ create_conversation.handler.go         # â† å¯¹åº” CreateConversation ç”¨ä¾‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ http/                                      # HTTP æ¥å£ï¼ˆæœ€å°ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ send_message.route.go
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ tests/                                     # æµ‹è¯•
â”‚   â”‚       â”œâ”€â”€ send_message.test.go
â”‚   â”‚       â””â”€â”€ rules.test.go                          # â† åŸºäº rules.md ç”Ÿæˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ llm/                                           # ã€LLM é¢†åŸŸã€‘è‡ªåŒ…å«
â”‚   â”‚   â”œâ”€â”€ README.md                                  # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ glossary.md                                # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ rules.md                                   # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ events.md                                  # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ usecases.yaml                              # âœ… å¿…é¡»ï¼šSelectModelã€GenerateStructuredOutput
â”‚   â”‚   â”œâ”€â”€ ai-metadata.json                           # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ model/                                     # ï¼ˆçœç•¥è¯¦ç»†æ–‡ä»¶åˆ—è¡¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ handlers/                                  # ç”¨ä¾‹å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ http/
â”‚   â”‚   â”œâ”€â”€ adapters/                                  # Einoã€OpenAIã€Claude é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”‚
â”‚   â”œâ”€â”€ monitoring/                                    # ã€ç›‘æ§é¢†åŸŸã€‘è‡ªåŒ…å«
â”‚   â”‚   â”œâ”€â”€ README.md                                  # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ glossary.md                                # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ rules.md                                   # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ events.md                                  # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ usecases.yaml                              # âœ… å¿…é¡»ï¼šCollectMetricsã€QueryStats
â”‚   â”‚   â”œâ”€â”€ ai-metadata.json                           # âœ… å¿…é¡»
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ http/
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”‚
â”‚   â””â”€â”€ shared/                                        # å…±äº«å†…æ ¸ï¼ˆè·¨é¢†åŸŸï¼‰
â”‚       â”œâ”€â”€ errors/                                    # æ ‡å‡†é”™è¯¯å®šä¹‰
â”‚       â”œâ”€â”€ events/                                    # äº‹ä»¶æ€»çº¿
â”‚       â””â”€â”€ types/                                     # å…±äº«ç±»å‹
â”‚
â”œâ”€â”€ infrastructure/                                    # ã€åŸºç¡€è®¾æ–½ã€‘å…¨å±€
â”‚   â”œâ”€â”€ persistence/                                   # æ•°æ®æŒä¹…åŒ–
â”‚   â”‚   â”œâ”€â”€ postgres/
â”‚   â”‚   â””â”€â”€ redis/
â”‚   â”œâ”€â”€ queue/                                         # å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼ˆAsynqï¼‰
â”‚   â”œâ”€â”€ middleware/                                    # å…¨å±€ä¸­é—´ä»¶ï¼ˆauthã€ratelimitç­‰ï¼‰
â”‚   â””â”€â”€ config/                                        # é…ç½®åŠ è½½
â”‚
â”œâ”€â”€ pkg/                                               # å¯å¤ç”¨å·¥å…·åŒ…
â”‚   â”œâ”€â”€ logger/
â”‚   â”œâ”€â”€ ratelimiter/
â”‚   â””â”€â”€ circuitbreaker/
â”‚
â”œâ”€â”€ migrations/                                        # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ postgres/
â”‚
â”œâ”€â”€ scripts/                                           # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ dev.sh
â”‚   â””â”€â”€ ai_codegen.sh                                  # AI ä»£ç ç”Ÿæˆè„šæœ¬
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ architecture.md
â”‚   â”œâ”€â”€ vibe-coding-ddd-structure.md                   # å®Œæ•´ç»“æ„è¯´æ˜
â”‚   â””â”€â”€ ai_workflow.md                                 # AI åä½œå·¥ä½œæµ
â”‚
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ README.md
```

**é‡è¦è¯´æ˜**ï¼š
- æ¯ä¸ªé¢†åŸŸç›®å½•å¿…é¡»åŒ…å« 6 ä¸ªæ˜¾å¼çŸ¥è¯†æ–‡ä»¶ï¼ˆREADMEã€glossaryã€rulesã€eventsã€usecases.yamlã€ai-metadata.jsonï¼‰
- `handlers/` ç›®å½•ä¸­çš„æ–‡ä»¶ä¸ `usecases.yaml` ä¸­çš„ç”¨ä¾‹ä¸€ä¸€å¯¹åº”
- æ‰€æœ‰ä»“å‚¨å®ç°åœ¨é¢†åŸŸå†…æ ‡è®°ä¸º `repository_impl.go`ï¼ˆä¾¿äºè¯†åˆ«åŸºç¡€è®¾æ–½ä»£ç ï¼‰
- å®Œæ•´çš„ç›®å½•ç»“æ„å’Œæ–‡ä»¶è¯´æ˜è¯·å‚è€ƒ [Vibe Coding Friendly DDD å®Œæ•´ç»“æ„æ–‡æ¡£](docs/vibe-coding-ddd-structure.md)
```

#### ğŸ¤– Vibe Coding Friendly è®¾è®¡äº®ç‚¹

1. **æ¯ä¸ªæ–‡ä»¶åéƒ½æ˜¯è‡ªè§£é‡Šçš„**ï¼š
   - `chat_application_service.go` ä¸€çœ¼çœ‹å‡ºæ˜¯èŠå¤©åº”ç”¨æœåŠ¡
   - `model_router_service.go` æ˜ç¡®æ˜¯æ¨¡å‹è·¯ç”±æœåŠ¡
   - AI æ— éœ€é¢å¤– prompt å°±èƒ½ç†è§£æ–‡ä»¶èŒè´£

2. **ä¸°å¯Œçš„å†…è”æ³¨é‡Š**ï¼š
```go
   // application/service/chat_application_service.go
   
   // ChatApplicationService èŠå¤©åº”ç”¨æœåŠ¡
   // èŒè´£ï¼š
   //   1. ç¼–æ’èŠå¤©é¢†åŸŸæœåŠ¡å’Œç›‘æ§æœåŠ¡
   //   2. å¤„ç†è·¨é¢†åŸŸçš„ä¸šåŠ¡æµç¨‹ï¼ˆå¦‚ï¼šèŠå¤© + ç›‘æ§ + æˆæœ¬æ§åˆ¶ï¼‰
   //   3. ä¸åŒ…å«é¢†åŸŸé€»è¾‘ï¼Œåªåšæµç¨‹ç¼–æ’
   //
   // ä½¿ç”¨åœºæ™¯ï¼š
   //   - HTTP Handler è°ƒç”¨æ­¤æœåŠ¡å¤„ç†èŠå¤©è¯·æ±‚
   //   - æ­¤æœåŠ¡è°ƒç”¨ ChatDomainServiceã€MonitoringService ç­‰
   //
   // ä¾èµ–ï¼š
   //   - domain/chat/service/ChatDomainService
   //   - domain/monitoring/service/MetricsCollectorService
   type ChatApplicationService struct {
       chatService      *service.ChatDomainService
       monitorService   *monitoring.MetricsCollectorService
       logger           logger.Logger
   }
   ```

3. **æ¯ä¸ªé‡è¦ç›®å½•æœ‰ README**ï¼š
   ```markdown
   # domain/chat/README.md
   
   ## èŠå¤©é¢†åŸŸ
   
   ### èŒè´£
   - ç®¡ç†å¯¹è¯å’Œæ¶ˆæ¯çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
   - Context çª—å£ç®¡ç†å’Œå†å²æ¶ˆæ¯è£å‰ª
   - æ¶ˆæ¯éªŒè¯å’Œè¿‡æ»¤
   
   ### è¾¹ç•Œ
   - âœ… åŒ…å«ï¼šå¯¹è¯ç®¡ç†ã€æ¶ˆæ¯éªŒè¯ã€Context è£å‰ª
   - âŒ ä¸åŒ…å«ï¼šå…·ä½“çš„ LLM è°ƒç”¨ï¼ˆå±äº LLM é¢†åŸŸï¼‰ã€ç›‘æ§ï¼ˆå±äº Monitoring é¢†åŸŸï¼‰
   
   ### æ ¸å¿ƒæ¦‚å¿µ
   - **Conversation**ï¼šå¯¹è¯å®ä½“ï¼Œä¸€æ¬¡å®Œæ•´çš„èŠå¤©ä¼šè¯
   - **Message**ï¼šæ¶ˆæ¯å®ä½“ï¼Œç”¨æˆ·æˆ– AI çš„å•æ¡æ¶ˆæ¯
   - **ContextWindow**ï¼šContext çª—å£é…ç½®ï¼Œé™åˆ¶å†å²æ¶ˆæ¯é•¿åº¦
   ```

4. **æ¸…æ™°çš„ä¾èµ–æ–¹å‘**ï¼š
   ```
   interfaces â†’ application â†’ domain â† infrastructure
                                â†‘
                              pkgï¼ˆå·¥å…·åŒ…ï¼Œæ— ä¾èµ–ï¼‰
   ```

5. **ç¤ºä¾‹é©±åŠ¨çš„æ–‡ä»¶ç»„ç»‡**ï¼š
   ```go
   // domain/llm/service/model_router_service.go
   
   // Example: å¦‚ä½•ä½¿ç”¨æ¨¡å‹è·¯ç”±æœåŠ¡
   //
   //   router := NewModelRouterService(statsRepo, logger)
   //   
   //   result, err := router.SelectModel(ctx, SelectModelRequest{
   //       Strategy: StrategyLatencyOptimized,
   //       Candidates: []string{"gpt-4o", "claude-3-sonnet"},
   //   })
   //   
   //   fmt.Println(result.SelectedModel)  // "claude-3-sonnet"
   //   fmt.Println(result.Reason)         // "P95 å»¶è¿Ÿæœ€ä½ï¼ˆ120msï¼‰"
   ```

### 5.3 å‰ç«¯ç»“æ„ï¼ˆFeature-First æ¶æ„ï¼‰

**æ ¸å¿ƒç†å¿µ**ï¼šåŠŸèƒ½ä¼˜å…ˆï¼ˆFeature-Firstï¼‰+ é¢†åŸŸå¯¹é½ + è·¨ç«¯ä»£ç å…±äº«

#### ä¸ºä»€ä¹ˆ Feature-Firstï¼Ÿ

ä¼ ç»Ÿçš„æŠ€æœ¯åˆ†å±‚ï¼ˆ`components/`, `hooks/`, `stores/`ï¼‰å¯¹ AI ä¸å‹å¥½ã€‚Feature-First è®© AI èƒ½ç«‹å³ç†è§£åŠŸèƒ½è¾¹ç•Œã€‚

| ä¼ ç»Ÿæ¶æ„ | Feature-First | AI ç†è§£ |
|---------|--------------|---------|
| `components/ChatWindow.tsx` | `features/chat/components/ChatWindow.tsx` | âœ… çŸ¥é“è¿™æ˜¯èŠå¤©åŠŸèƒ½çš„ç»„ä»¶ |
| `hooks/useChat.ts` | `features/chat/hooks/useChat.ts` | âœ… çŸ¥é“è¿™æ˜¯èŠå¤©åŠŸèƒ½çš„é€»è¾‘ |
| `stores/chat.ts` | `features/chat/stores/chatStore.ts` | âœ… çŸ¥é“è¿™æ˜¯èŠå¤©åŠŸèƒ½çš„çŠ¶æ€ |

#### Web å‰ç«¯ï¼ˆ`web/`ï¼‰

```
web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ features/                              # ã€åŠŸèƒ½ç›®å½•ã€‘ä¸åç«¯é¢†åŸŸå¯¹é½
â”‚   â”‚   â”œâ”€â”€ chat/                              # èŠå¤©åŠŸèƒ½ï¼ˆå¯¹é½ backend/domains/chatï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ README.md                      # åŠŸèƒ½è¯´æ˜
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                    # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/                         # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/                        # çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ api/                           # API è°ƒç”¨
â”‚   â”‚   â”‚   â””â”€â”€ types.ts                       # åŠŸèƒ½ç‰¹å®šç±»å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ llm/                               # LLM åŠŸèƒ½ï¼ˆå¯¹é½ backend/domains/llmï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ ... (åŒä¸Š)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ monitoring/                        # ç›‘æ§åŠŸèƒ½ï¼ˆå¯¹é½ backend/domains/monitoringï¼‰
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                                # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/                        # å…±äº«ç»„ä»¶ï¼ˆshadcn/uiï¼‰
â”‚   â”‚   â”œâ”€â”€ hooks/                             # å…±äº« hooks
â”‚   â”‚   â”œâ”€â”€ utils/                             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ client.ts                      # Axios å®ä¾‹
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                                 # ã€ç±»å‹å®šä¹‰ã€‘ä»åç«¯è‡ªåŠ¨ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ domains/                           # é¢†åŸŸç±»å‹ï¼ˆtygo ç”Ÿæˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.ts                        # â† backend/domains/chat/http/dto
â”‚   â”‚   â”‚   â”œâ”€â”€ llm.ts
â”‚   â”‚   â”‚   â””â”€â”€ monitoring.ts
â”‚   â”‚   â””â”€â”€ shared.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â””â”€â”€ vite-env.d.ts
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

#### ç§»åŠ¨ç«¯ï¼ˆ`mobile/`ï¼‰

```
mobile/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ features/                              # ã€åŠŸèƒ½ç›®å½•ã€‘ä¸ Web å¯¹é½
â”‚   â”‚   â”œâ”€â”€ chat/                              # èŠå¤©åŠŸèƒ½ï¼ˆRN ç‰ˆæœ¬ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ README.md
â”‚   â”‚   â”‚   â”œâ”€â”€ components/                    # RN ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/                         # å¯ä¸ Web å…±äº«é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/                        # å¯ä¸ Web å…±äº«
â”‚   â”‚   â”‚   â””â”€â”€ api/                           # å¯ä¸ Web å…±äº«
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ llm/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                                # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/                        # RN åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                                 # ã€ç±»å‹å®šä¹‰ã€‘ä¸ Web å…±äº«
â”‚   â”‚   â””â”€â”€ domains/                           # ç¬¦å·é“¾æ¥åˆ° web/src/types/domains
â”‚   â”‚       â”œâ”€â”€ chat.ts                        # â† ä¸ Web å…±äº«
â”‚   â”‚       â”œâ”€â”€ llm.ts
â”‚   â”‚       â””â”€â”€ monitoring.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â””â”€â”€ AppNavigator.tsx                   # React Navigation
â”‚   â”‚
â”‚   â””â”€â”€ App.tsx
â”‚
â”œâ”€â”€ android/
â”œâ”€â”€ ios/
â””â”€â”€ package.json
```

**ç±»å‹å…±äº«æ–¹å¼**ï¼ˆä½¿ç”¨ç¬¦å·é“¾æ¥ï¼‰ï¼š
```bash
cd mobile/src/types
ln -s ../../../web/src/types/domains ./domains
```

**è¯¦ç»†ç»“æ„è¯´æ˜**ï¼šå‚è§ [Vibe Coding æœ€ä¼˜æ¶æ„æ–‡æ¡£](docs/optimal-architecture.md)

#### Feature-First çš„ä¼˜åŠ¿

| ç»´åº¦ | ä¼ ç»ŸæŠ€æœ¯åˆ†å±‚ | Feature-First | AI ç†è§£ |
|------|------------|--------------|---------|
| **ç»„ç»‡æ–¹å¼** | components/, hooks/, stores/ | features/chat/, features/llm/ | âœ… åŠŸèƒ½è¾¹ç•Œæ¸…æ™° |
| **ä¿®æ”¹èŒƒå›´** | è·¨å¤šä¸ªç›®å½• | åœ¨ä¸€ä¸ªç›®å½•å†… | âœ… ä¸Šä¸‹æ–‡é›†ä¸­ |
| **åˆ é™¤åŠŸèƒ½** | éœ€è¦æ‰¾æ‰€æœ‰ç›¸å…³æ–‡ä»¶ | åˆ é™¤ä¸€ä¸ªç›®å½• | âœ… ç®€å•å®‰å…¨ |
| **é¢†åŸŸå¯¹é½** | æ— å¯¹åº”å…³ç³» | å¯¹é½åç«¯é¢†åŸŸ | âœ… å‰åç«¯æ˜ å°„æ¸…æ™° |

### 5.4 è·¨ç«¯ä»£ç å…±äº«ç­–ç•¥

#### å¯å…±äº«çš„ä»£ç 

| ç±»å‹ | å…±äº«æ–¹å¼ | è¯´æ˜ |
|------|---------|------|
| **ç±»å‹å®šä¹‰** | ç¬¦å·é“¾æ¥ | `mobile/src/types/domains â†’ web/src/types/domains` |
| **API è°ƒç”¨** | å¤åˆ¶æˆ–å…±äº«åŒ… | `chatApi.ts` é€»è¾‘ç›¸åŒ |
| **Store é€»è¾‘** | å¤åˆ¶æˆ–å…±äº«åŒ… | Zustand store å¯å…±äº« |
| **Hooks é€»è¾‘** | éƒ¨åˆ†å…±äº« | ä¸šåŠ¡é€»è¾‘å¯å…±äº«ï¼ŒUI hooks ä¸å…±äº« |
| **å·¥å…·å‡½æ•°** | å…±äº«åŒ… | `utils/` å®Œå…¨å¯å…±äº« |

#### ä¸å…±äº«çš„ä»£ç 

| ç±»å‹ | åŸå›  |
|------|------|
| **UI ç»„ä»¶** | Web ç”¨ shadcn/uiï¼ŒRN ç”¨åŸç”Ÿç»„ä»¶ |
| **è·¯ç”±/å¯¼èˆª** | React Router vs React Navigation |
| **æ ·å¼** | CSS/Tailwind vs StyleSheet |

#### 1. **ç»„ä»¶åŠŸèƒ½è‡ªè§£é‡Š**ï¼š
   ```tsx
   // âŒ ä¸å¥½ï¼šå‘½åæ¨¡ç³Š
   <List data={messages} />
   
   // âœ… å¥½ï¼šä¸€çœ¼çœ‹æ‡‚
   <MessageList messages={messages} />
   ```

2. **å®Œæ•´çš„ç»„ä»¶æ³¨é‡Š**ï¼š
   ```tsx
   // components/chat/StreamingText.tsx
   
   /**
    * StreamingText - æµå¼æ–‡æœ¬æ˜¾ç¤ºç»„ä»¶
    * 
    * åŠŸèƒ½ï¼š
    *   - ä»¥æ‰“å­—æœºæ•ˆæœé€å­—ç¬¦æ˜¾ç¤ºæ–‡æœ¬
    *   - æ”¯æŒæš‚åœ/ç»§ç»­åŠ¨ç”»
    *   - å¯è‡ªå®šä¹‰æ‰“å­—é€Ÿåº¦
    * 
    * ä½¿ç”¨åœºæ™¯ï¼š
    *   - æ˜¾ç¤º AI æµå¼å“åº”
    *   - å¢å¼ºç”¨æˆ·ä½“éªŒ
    * 
    * Example:
    *   <StreamingText 
    *     text="Hello, world!"
    *     speed={50}  // æ¯ä¸ªå­—ç¬¦é—´éš” 50ms
    *     onComplete={() => console.log('Done')}
    *   />
    * 
    * @param text - è¦æ˜¾ç¤ºçš„å®Œæ•´æ–‡æœ¬
    * @param speed - æ‰“å­—é€Ÿåº¦ï¼ˆmsï¼‰
    * @param onComplete - åŠ¨ç”»å®Œæˆå›è°ƒ
    */
   export function StreamingText({ text, speed = 50, onComplete }: Props) {
     // ...
   }
   ```

3. **æ¸…æ™°çš„çŠ¶æ€ç®¡ç†**ï¼š
   ```ts
   // stores/chatStore.ts
   
   /**
    * Chat Store - èŠå¤©çŠ¶æ€ç®¡ç†
    * 
    * èŒè´£ï¼š
    *   - ç®¡ç†å½“å‰å¯¹è¯å’Œæ¶ˆæ¯å†å²
    *   - å¤„ç†å‘é€/æ¥æ”¶æ¶ˆæ¯
    *   - ç®¡ç†åŠ è½½çŠ¶æ€
    * 
    * Example:
    *   const { messages, sendMessage, isLoading } = useChatStore()
    *   
    *   await sendMessage({
    *     content: "Hello",
    *     model: "gpt-4o"
    *   })
    */
   interface ChatStore {
     // çŠ¶æ€
     messages: Message[]
     currentConversationId: string | null
     isLoading: boolean
     
     // Actions
     sendMessage: (message: MessageInput) => Promise<void>
     clearMessages: () => void
     loadHistory: (conversationId: string) => Promise<void>
   }
   ```

4. **ç±»å‹å®‰å…¨çš„ API è°ƒç”¨**ï¼š
   ```ts
   // api/endpoints/chat.ts
   
   /**
    * å‘é€èŠå¤©æ¶ˆæ¯
    * 
    * @param request - èŠå¤©è¯·æ±‚
    * @returns èŠå¤©å“åº”
    * 
    * Example:
    *   const response = await sendChatMessage({
    *     message: "Hello",
    *     model: "gpt-4o",
    *     temperature: 0.7
    *   })
    */
   export async function sendChatMessage(
     request: ChatRequest
   ): Promise<ChatResponse> {
     const response = await apiClient.post<ChatResponse>(
       '/api/chat',
       request
     )
     return response.data
   }
   ```

5. **æ¯ä¸ªç›®å½•æœ‰ README**ï¼š
   ```markdown
   # components/chat/README.md
   
   ## èŠå¤©ç»„ä»¶åº“
   
   ### ç»„ä»¶åˆ—è¡¨
   
   - **ChatWindow**: èŠå¤©çª—å£å®¹å™¨
   - **MessageList**: æ¶ˆæ¯åˆ—è¡¨ï¼ˆæ”¯æŒè™šæ‹Ÿæ»šåŠ¨ï¼‰
   - **MessageInput**: æ¶ˆæ¯è¾“å…¥æ¡†
   - **StreamingText**: æµå¼æ–‡æœ¬æ˜¾ç¤º
   
   ### ä½¿ç”¨ç¤ºä¾‹
   
   \`\`\`tsx
   import { ChatWindow } from '@/components/chat'
   
   function App() {
     return <ChatWindow conversationId="conv-123" />
   }
   \`\`\`
   
   ### ç»„ä»¶ä¾èµ–å…³ç³»
   
   \`\`\`
   ChatWindow
   â”œâ”€â”€ MessageList
   â”‚   â””â”€â”€ MessageItem
   â”‚       â””â”€â”€ StreamingText
   â””â”€â”€ MessageInput
   \`\`\`
   ```

## 6. AI-Friendly è®¾è®¡ç†å¿µ (AI-Friendly Design)

### 6.1 ä¸ºä»€ä¹ˆæ˜¯ AI-Friendlyï¼Ÿ

åœ¨ AI è¾…åŠ©ç¼–ç¨‹æ—¶ä»£ï¼ˆCursorã€GitHub Copilotã€ChatGPTï¼‰ï¼Œä¸€ä¸ªå¥½çš„ä»£ç åº“åº”è¯¥ï¼š
- âœ… **æ˜“äº AI ç†è§£**ï¼šæ¸…æ™°çš„ç›®å½•ç»“æ„ã€è¯­ä¹‰åŒ–çš„å‘½å
- âœ… **æ˜“äº AI æ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ã€æ˜ç¡®çš„è¾¹ç•Œ
- âœ… **æ˜“äº AI è°ƒè¯•**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†ã€ä¸°å¯Œçš„æ—¥å¿—
- âœ… **æ˜“äº AI æµ‹è¯•**ï¼šè§£è€¦çš„ä¾èµ–ã€å¯æµ‹è¯•çš„è®¾è®¡

### 6.2 æœ¬é¡¹ç›®çš„ AI-Friendly å®è·µ

#### 1. **DDD æ¶æ„å¤©ç„¶é€‚åˆ AI ç†è§£**
```
æ¸…æ™°çš„é¢†åŸŸåˆ’åˆ†ï¼š
- domain/chat/      â†’ AI èƒ½ç«‹å³ç†è§£è¿™æ˜¯èŠå¤©é¢†åŸŸ
- domain/llm/       â†’ AI çŸ¥é“è¿™æ˜¯ LLM ç›¸å…³é€»è¾‘
- domain/monitoring/â†’ AI æ˜ç™½è¿™æ˜¯ç›‘æ§ç›¸å…³

åˆ†å±‚æ¶æ„è®© AI å¿«é€Ÿå®šä½ï¼š
- interfaces/   â†’ æ¥å£å±‚ï¼Œå¤„ç† HTTP è¯·æ±‚
- application/  â†’ åº”ç”¨å±‚ï¼Œç¼–æ’ä¸šåŠ¡é€»è¾‘
- domain/       â†’ é¢†åŸŸå±‚ï¼Œæ ¸å¿ƒä¸šåŠ¡è§„åˆ™
- infrastructure/â†’ åŸºç¡€è®¾æ–½å±‚ï¼Œå¤–éƒ¨ä¾èµ–
```

#### 2. **è¯­ä¹‰åŒ–å‘½åï¼Œè®© AI ä¸€çœ¼çœ‹æ‡‚**
```go
// âŒ ä¸å¥½ï¼šç¼©å†™ã€æ¨¡ç³Š
func ProcMsg(m *Msg) (*Res, error) { }

// âœ… å¥½ï¼šå®Œæ•´ã€æ¸…æ™°
func ProcessChatMessage(message *ChatMessage) (*ChatResponse, error) { }
```

#### 3. **å®Œå–„çš„æ³¨é‡Šï¼Œå¸®åŠ© AI ç†è§£æ„å›¾**
```go
// ChatService è´Ÿè´£å¤„ç†èŠå¤©ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
// åŒ…æ‹¬å¤šè½®å¯¹è¯ç®¡ç†ã€Context è£å‰ªã€æ¶ˆæ¯æŒä¹…åŒ–
type ChatService struct {
    repo       ChatRepository    // èŠå¤©æ¶ˆæ¯ä»“å‚¨
    llmClient  *eino.Client      // LLM å®¢æˆ·ç«¯
    tokenizer  *tiktoken.Tokenizer // Token è®¡æ•°å™¨
}

// StreamChat å¤„ç†æµå¼èŠå¤©è¯·æ±‚
// 1. éªŒè¯ç”¨æˆ·æƒé™å’Œé™æµ
// 2. è£å‰ªå†å²æ¶ˆæ¯ä»¥é€‚åº” Context çª—å£
// 3. è°ƒç”¨ LLM è¿›è¡Œæµå¼å“åº”
// 4. è®°å½•ç›‘æ§æŒ‡æ ‡ï¼ˆå¼‚æ­¥ï¼‰
func (s *ChatService) StreamChat(ctx context.Context, req *ChatRequest) (<-chan *ChatChunk, error) {
    // ...
}
```

#### 4. **æ ‡å‡†åŒ–çš„é”™è¯¯å¤„ç†**
```go
// pkg/errors/errors.go
// å®šä¹‰æ ‡å‡†é”™è¯¯ç±»å‹ï¼Œè®© AI çŸ¥é“å¦‚ä½•å¤„ç†é”™è¯¯

var (
    ErrInvalidInput    = errors.New("invalid input")
    ErrRateLimitExceeded = errors.New("rate limit exceeded")
    ErrModelNotAvailable = errors.New("model not available")
)

// é”™è¯¯åŒ…è£…ï¼Œä¿ç•™å †æ ˆä¿¡æ¯
func WrapError(err error, message string) error {
    return fmt.Errorf("%s: %w", message, err)
}
```

#### 5. **ç±»å‹å®‰å…¨ï¼Œå‡å°‘ AI çš„çŒœæµ‹**
```go
// ä½¿ç”¨æ˜ç¡®çš„ç±»å‹å®šä¹‰ï¼Œè€Œä¸æ˜¯ map[string]interface{}

type ChatRequest struct {
    UserID      string        `json:"user_id" validate:"required"`
    Message     string        `json:"message" validate:"required,max=10000"`
    Model       string        `json:"model" validate:"required,oneof=gpt-4o gpt-3.5-turbo"`
    Temperature *float64      `json:"temperature,omitempty" validate:"omitempty,min=0,max=2"`
    MaxTokens   *int          `json:"max_tokens,omitempty" validate:"omitempty,min=1,max=4000"`
}
```

#### 6. **æ¸…æ™°çš„ä¾èµ–æ³¨å…¥**
```go
// ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼Œè®© AI æ¸…æ¥šä¾èµ–å…³ç³»

type ChatService struct {
    repo       ChatRepository
    llmClient  LLMClient
    monitor    MonitorService
    limiter    RateLimiter
}

// NewChatService åˆ›å»ºèŠå¤©æœåŠ¡å®ä¾‹
// æ‰€æœ‰ä¾èµ–éƒ½é€šè¿‡å‚æ•°ä¼ å…¥ï¼Œæ–¹ä¾¿æµ‹è¯•å’Œ AI ç†è§£
func NewChatService(
    repo ChatRepository,
    llmClient LLMClient,
    monitor MonitorService,
    limiter RateLimiter,
) *ChatService {
    return &ChatService{
        repo:      repo,
        llmClient: llmClient,
        monitor:   monitor,
        limiter:   limiter,
    }
}
```

### 6.3 AI åä½œå·¥ä½œæµï¼šusecases.yaml é©±åŠ¨å¼€å‘

Vibe Coding Friendly DDD çš„æ ¸å¿ƒæ˜¯**å£°æ˜å¼ç”¨ä¾‹é©±åŠ¨å¼€å‘**ã€‚

#### æ ‡å‡†å·¥ä½œæµ

```mermaid
graph LR
    A[å¼€å‘è€…ä¿®æ”¹ usecases.yaml] --> B[è§¦å‘ AI Codegen]
    B --> C[AI è¯»å–æ˜¾å¼çŸ¥è¯†æ–‡ä»¶]
    C --> D[AI ç”Ÿæˆ handler + tests]
    D --> E[CI è¿è¡Œæµ‹è¯•]
    E --> F{æµ‹è¯•é€šè¿‡?}
    F -->|æ˜¯| G[äººå·¥ Review]
    F -->|å¦| D
    G --> H[åˆå¹¶ & è®°å½• AI å†³ç­–]
```

#### åœºæ™¯ 1ï¼šæ·»åŠ æ–°ç”¨ä¾‹ "å¯¼å‡ºå¯¹è¯å†å²"

##### æ­¥éª¤ 1ï¼šä¿®æ”¹ usecases.yaml

```yaml
# domains/chat/usecases.yaml

ExportConversation:
  description: "å¯¼å‡ºå¯¹è¯å†å²ä¸º JSON æˆ– Markdown æ ¼å¼"
  sensitivity: low  # ä½æ•æ„Ÿåº¦ï¼ŒAI å¯è‡ªåŠ¨ç”Ÿæˆ
  
  inputs:
    - conversationID: string (required)
    - format: ExportFormat (enum: json|markdown)
    - timeRange: TimeRange (optional)
  
  outputs:
    - exportedData: string
    - fileSize: int
  
  steps:
    - name: ValidateConversationAccess
      type: sync
      on_fail: abort
      errors:
        - CONVERSATION_NOT_FOUND
        - UNAUTHORIZED_ACCESS
    
    - name: LoadMessages
      type: sync
      description: "åŠ è½½æŒ‡å®šæ—¶é—´èŒƒå›´çš„æ¶ˆæ¯"
      filter: timeRange
    
    - name: FormatMessages
      type: sync
      description: "æ ¹æ® format æ ¼å¼åŒ–æ¶ˆæ¯"
      adapter: formatters.format
    
    - name: PublishExportCompleted
      type: event
      event: ConversationExported
```

##### æ­¥éª¤ 2ï¼šè§¦å‘ AI ä»£ç ç”Ÿæˆ

```bash
# æ–¹å¼ 1ï¼šå‘½ä»¤è¡Œå·¥å…·
./scripts/ai_codegen.sh --domain chat --usecase ExportConversation

# æ–¹å¼ 2ï¼šåœ¨ Cursor ä¸­ä½¿ç”¨ prompt
"è¯»å– domains/chat/usecases.yaml ä¸­çš„ ExportConversation ç”¨ä¾‹ï¼Œ
ç”Ÿæˆå¯¹åº”çš„ handler å’Œ tests"
```

##### æ­¥éª¤ 3ï¼šAI è‡ªåŠ¨ç”Ÿæˆä»£ç 

AI ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **è¯»å–æ˜¾å¼çŸ¥è¯†**ï¼š
   - `domains/chat/README.md` - ç†è§£é¢†åŸŸè¾¹ç•Œ
   - `domains/chat/glossary.md` - ç†è§£æœ¯è¯­ï¼ˆConversationã€Messageï¼‰
   - `domains/chat/rules.md` - ç†è§£ä¸šåŠ¡è§„åˆ™
   - `domains/chat/events.md` - ç†è§£ç°æœ‰äº‹ä»¶æ¨¡å¼
   - `domains/chat/usecases.yaml` - è¯»å– ExportConversation å£°æ˜

2. **ç”Ÿæˆ handler ä»£ç **ï¼š

```go
// domains/chat/handlers/export_conversation.handler.go
// æ­¤æ–‡ä»¶ç”± AI è‡ªåŠ¨ç”Ÿæˆ
// åŸºäº: domains/chat/usecases.yaml - ExportConversation

package handlers

import (
    "context"
    "fmt"
)

// ExportConversationHandler å¯¼å‡ºå¯¹è¯å†å²å¤„ç†å™¨
// å¯¹åº”ç”¨ä¾‹: ExportConversation
//
// è¾“å…¥:
//   - conversationID: å¯¹è¯ ID
//   - format: å¯¼å‡ºæ ¼å¼ï¼ˆjson|markdownï¼‰
//   - timeRange: æ—¶é—´èŒƒå›´ï¼ˆå¯é€‰ï¼‰
//
// è¾“å‡º:
//   - exportedData: å¯¼å‡ºçš„æ•°æ®
//   - fileSize: æ–‡ä»¶å¤§å°
//
// æ­¥éª¤:
//   1. ValidateConversationAccess - éªŒè¯è®¿é—®æƒé™
//   2. LoadMessages - åŠ è½½æ¶ˆæ¯
//   3. FormatMessages - æ ¼å¼åŒ–æ¶ˆæ¯
//   4. PublishExportCompleted - å‘å¸ƒäº‹ä»¶
type ExportConversationHandler struct {
    repo       repository.ConversationRepository
    formatters map[ExportFormat]Formatter
    eventBus   events.Bus
    logger     logger.Logger
}

func NewExportConversationHandler(
    repo repository.ConversationRepository,
    formatters map[ExportFormat]Formatter,
    eventBus events.Bus,
    logger logger.Logger,
) *ExportConversationHandler {
    return &ExportConversationHandler{
        repo:       repo,
        formatters: formatters,
        eventBus:   eventBus,
        logger:     logger,
    }
}

func (h *ExportConversationHandler) Handle(
    ctx context.Context,
    req ExportConversationRequest,
) (*ExportConversationResponse, error) {
    // æ­¥éª¤ 1: ValidateConversationAccess
    conversation, err := h.repo.GetByID(ctx, req.ConversationID)
    if err != nil {
        return nil, errors.New("CONVERSATION_NOT_FOUND")
    }
    
    if !h.hasAccess(ctx, conversation) {
        return nil, errors.New("UNAUTHORIZED_ACCESS")
    }
    
    // æ­¥éª¤ 2: LoadMessages
    messages, err := h.repo.LoadMessages(ctx, req.ConversationID, req.TimeRange)
    if err != nil {
        return nil, fmt.Errorf("failed to load messages: %w", err)
    }
    
    // æ­¥éª¤ 3: FormatMessages
    formatter, ok := h.formatters[req.Format]
        if !ok {
        return nil, errors.New("UNSUPPORTED_FORMAT")
    }
    
    exportedData := formatter.Format(messages)
    
    // æ­¥éª¤ 4: PublishExportCompleted
    h.eventBus.Publish(ctx, "ConversationExported", ConversationExportedEvent{
        ConversationID: req.ConversationID,
        Format:         req.Format,
        FileSize:       len(exportedData),
    })
    
    return &ExportConversationResponse{
        ExportedData: exportedData,
        FileSize:     len(exportedData),
    }, nil
}
```

3. **ç”Ÿæˆæµ‹è¯•ä»£ç **ï¼š

```go
// domains/chat/tests/export_conversation.test.go
// æ­¤æ–‡ä»¶ç”± AI è‡ªåŠ¨ç”Ÿæˆ
// åŸºäº: domains/chat/usecases.yaml - ExportConversation

package tests

import (
    "testing"
)

func TestExportConversationHandler_Success(t *testing.T) {
    // åŸºäº usecases.yaml çš„ steps è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
    tests := []struct {
        name    string
        request ExportConversationRequest
        want    *ExportConversationResponse
        wantErr error
    }{
        {
            name: "å¯¼å‡ºä¸º JSON æ ¼å¼",
            request: ExportConversationRequest{
                ConversationID: "conv-123",
                Format:         ExportFormatJSON,
            },
            want: &ExportConversationResponse{
                ExportedData: `{"messages":[...]}`,
                FileSize:     100,
            },
            wantErr: nil,
        },
        {
            name: "æœªæˆæƒè®¿é—®",
            request: ExportConversationRequest{
                ConversationID: "conv-999",
                Format:         ExportFormatJSON,
            },
            want:    nil,
            wantErr: errors.New("UNAUTHORIZED_ACCESS"),
        },
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            // ... æµ‹è¯•å®ç°
        })
    }
}
```

4. **æ›´æ–°æ–‡æ¡£**ï¼š
   - æ›´æ–° `domains/chat/README.md` æ·»åŠ  ExportConversation ç”¨ä¾‹è¯´æ˜
   - æ›´æ–° `domains/chat/events.md` æ·»åŠ  ConversationExported äº‹ä»¶

##### æ­¥éª¤ 4ï¼šCI éªŒè¯

```bash
# è¿è¡Œæµ‹è¯•
go test ./domains/chat/tests/

# éªŒè¯ rules.md çš„è§„åˆ™
./scripts/validate_rules.sh domains/chat

# éªŒè¯ usecases.yaml å’Œä»£ç çš„ä¸€è‡´æ€§
./scripts/validate_usecases.sh domains/chat
```

##### æ­¥éª¤ 5ï¼šè®°å½• AI å†³ç­–

```go
// AI å†³ç­–è®°å½•ï¼ˆå­˜å…¥ monitoring é¢†åŸŸï¼‰
AIDecision{
    DecisionID:     "ai-dec-20251122-001",
    Prompt:         "Generate ExportConversation handler",
    Domain:         "chat",
    UseCase:        "ExportConversation",
    GeneratedFiles: ["handlers/export_conversation.handler.go", "tests/export_conversation.test.go"],
    Timestamp:      "2025-11-22T10:00:00Z",
    Approved:       true,
    ReviewedBy:     "user@example.com",
}
```

##### ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼æ›´é«˜æ•ˆï¼Ÿ

| ç»´åº¦ | ä¼ ç»Ÿå¼€å‘ | Vibe Coding Friendly |
|------|---------|---------------------|
| **éœ€æ±‚å®šä¹‰** | å£å¤´æè¿° / æ–‡æ¡£ | usecases.yamlï¼ˆæœºå™¨å¯è¯»ï¼‰ |
| **AI ç†è§£** | éœ€è¦å¤§é‡ prompt | AI ç›´æ¥è¯»å– 6 ä¸ªæ˜¾å¼æ–‡ä»¶ |
| **ä»£ç ç”Ÿæˆ** | AI éœ€è¦çŒœæµ‹ç»“æ„ | AI ä¸¥æ ¼æŒ‰ç…§ yaml æ­¥éª¤ç”Ÿæˆ |
| **æµ‹è¯•ç”Ÿæˆ** | æ‰‹åŠ¨ç¼–å†™ | AI è‡ªåŠ¨ç”Ÿæˆï¼ˆåŸºäº stepsï¼‰ |
| **ä¸€è‡´æ€§** | ä½ï¼ˆä»£ç å’Œæ–‡æ¡£å®¹æ˜“è„±èŠ‚ï¼‰ | é«˜ï¼ˆyaml æ˜¯å”¯ä¸€çœŸç†æºï¼‰ |
| **å¯è¿½æº¯** | éš¾ | æ˜“ï¼ˆAI å†³ç­–è½¨è¿¹è®°å½•ï¼‰ |
| **å¼€å‘æ—¶é—´** | 30 åˆ†é’Ÿ | **10 åˆ†é’Ÿ** |

---

#### å…¶ä»–å¸¸è§åœºæ™¯

##### åœºæ™¯ 2ï¼šä¿®æ”¹ç°æœ‰ç”¨ä¾‹ï¼ˆæ·»åŠ æ­¥éª¤ï¼‰

```yaml
# åœ¨ usecases.yaml ä¸­ä¸º SendMessage æ·»åŠ æ•æ„Ÿè¯è¿‡æ»¤æ­¥éª¤

SendMessage:
  steps:
    - ValidateMessage
    - FilterSensitiveWords  # â† æ–°å¢æ­¥éª¤
      on_fail: abort
      errors:
        - MESSAGE_FILTERED
    - LoadHistory
    # ... å…¶ä»–æ­¥éª¤
```

**AI ä¼šè‡ªåŠ¨**ï¼š
- åœ¨ `send_message.handler.go` çš„å¯¹åº”ä½ç½®æ’å…¥ä»£ç 
- æ›´æ–°æµ‹è¯•ç”¨ä¾‹æ·»åŠ æ•æ„Ÿè¯è¿‡æ»¤çš„æµ‹è¯•
- æ›´æ–° `events.md` æ·»åŠ  MessageFiltered äº‹ä»¶

##### åœºæ™¯ 3ï¼šè°ƒè¯•é—®é¢˜

```
æç¤ºè¯: "SendMessage ç”¨ä¾‹ç»å¸¸è¶…æ—¶ï¼Œåˆ†æåŸå› "

AI åˆ†æè·¯å¾„:
1. è¯»å– domains/chat/usecases.yaml ä¸­ SendMessage çš„ steps
2. æ£€æŸ¥æ¯ä¸ª step çš„è¶…æ—¶é…ç½®
3. æŸ¥çœ‹ adaptersï¼ˆå¦‚ einoClient.chatï¼‰çš„è¶…æ—¶è®¾ç½®
4. ç»™å‡ºè¯Šæ–­å’Œä¿®å¤å»ºè®®
```

##### åœºæ™¯ 4ï¼šæ·»åŠ æ–°é¢†åŸŸ

```bash
# 1. åˆ›å»ºé¢†åŸŸç›®å½•
mkdir -p domains/billing

# 2. åˆ›å»º 6 ä¸ªå¿…éœ€æ–‡ä»¶
touch domains/billing/{README.md,glossary.md,rules.md,events.md,usecases.yaml,ai-metadata.json}

# 3. ç¼–å†™ usecases.yaml
# 4. è§¦å‘ AI ç”Ÿæˆ
./scripts/ai_codegen.sh --domain billing --all
```

### 6.4 AI-Friendly çš„ä»·å€¼

| ç»´åº¦ | ä¼ ç»Ÿä»£ç åº“ | Vibe Coding Friendly ä»£ç åº“ |
|------|---------|-------------------------|
| **å‘½åæ–¹å¼** | ç¼©å†™ã€æ¨¡ç³Šå‘½åï¼ˆ`proc`, `svc`, `hdl`ï¼‰ | å®Œæ•´ã€è¯­ä¹‰åŒ–å‘½åï¼ˆ`ProcessChatMessage`, `ChatService`, `ChatHandler`ï¼‰ |
| **ç›®å½•ç»“æ„** | æ··ä¹±ã€åµŒå¥—æ·±ã€èŒè´£ä¸æ¸… | DDD å››å±‚æ¶æ„ï¼Œæ¯å±‚èŒè´£æ¸…æ™° |
| **æ³¨é‡Šæ–‡æ¡£** | ç¼ºå°‘æˆ–è¿‡æ—¶ | æ¯ä¸ªæ–‡ä»¶æœ‰å®Œæ•´æ³¨é‡Šå’Œä½¿ç”¨ç¤ºä¾‹ |
| **é”™è¯¯å¤„ç†** | ä¸ä¸€è‡´ï¼Œåˆ°å¤„éƒ½æ˜¯ `if err != nil` | æ ‡å‡†åŒ–é”™è¯¯ç±»å‹ï¼Œç»Ÿä¸€å¤„ç†æµç¨‹ |
| **ä¾èµ–ç®¡ç†** | éšå¼ä¾èµ–ã€å…¨å±€å˜é‡ | æ˜¾å¼ä¾èµ–æ³¨å…¥ï¼Œæ„é€ å‡½æ•°æ¸…æ™° |
| **ç±»å‹å®‰å…¨** | `map[string]interface{}` æ»¡å¤©é£ | å¼ºç±»å‹å®šä¹‰ï¼Œç¼–è¯‘æœŸæ£€æŸ¥ |
| **AI ç†è§£é€Ÿåº¦** | éœ€è¦å¤§é‡ prompt å’Œä¸Šä¸‹æ–‡ | AI å¿«é€Ÿç†è§£ï¼Œ1-2 ä¸ª prompt å³å¯ |
| **AI ç”Ÿæˆå‡†ç¡®åº¦** | ç»å¸¸åç¦»æ¶æ„ï¼Œéœ€è¦äººå·¥ä¿®æ­£ | é«˜åº¦å‡†ç¡®ï¼Œç¬¦åˆæ¶æ„è§„èŒƒ |
| **å¼€å‘æ•ˆç‡** | ä¼ ç»Ÿæ•ˆç‡ï¼ˆ100%ï¼‰ | **æå‡ 50%+ï¼ˆAI è¾…åŠ©ï¼‰** |
| **ä»£ç è´¨é‡** | ä¸ç¨³å®šï¼Œä¾èµ– code review | é«˜è´¨é‡ï¼Œæ¶æ„çº¦æŸ + AI ç”Ÿæˆ |
| **å­¦ä¹ æ›²çº¿** | é™¡å³­ï¼Œéœ€è¦ç†Ÿæ‚‰æ•´ä¸ªé¡¹ç›® | å¹³ç¼“ï¼ŒAI å¸®åŠ©ç†è§£å’Œæ‰©å±• |

#### å®æµ‹æ•°æ®å¯¹æ¯”

| ä»»åŠ¡ | ä¼ ç»Ÿä»£ç åº“ | Vibe Coding Friendly ä»£ç åº“ |
|------|---------|-------------------------|
| **æ·»åŠ æ–°åŠŸèƒ½**ï¼ˆå†å²å¯¼å‡ºï¼‰ | 30 åˆ†é’Ÿï¼ˆéœ€è¦ç†è§£ç°æœ‰ä»£ç ï¼‰ | **15 åˆ†é’Ÿ**ï¼ˆAI å‡†ç¡®ç”Ÿæˆï¼‰ |
| **è°ƒè¯•é—®é¢˜**ï¼ˆè¶…æ—¶æ’æŸ¥ï¼‰ | 20 åˆ†é’Ÿï¼ˆæ‰‹åŠ¨è¿½è¸ªè°ƒç”¨é“¾ï¼‰ | **8 åˆ†é’Ÿ**ï¼ˆAI å¿«é€Ÿå®šä½ï¼‰ |
| **ç¼–å†™æµ‹è¯•**ï¼ˆå•å…ƒæµ‹è¯•ï¼‰ | 25 åˆ†é’Ÿï¼ˆæ‰‹åŠ¨å†™ mockï¼‰ | **10 åˆ†é’Ÿ**ï¼ˆAI è‡ªåŠ¨ç”Ÿæˆï¼‰ |
| **é‡æ„ä»£ç **ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰ | 45 åˆ†é’Ÿï¼ˆéœ€è¦ä»”ç»†è®¾è®¡ï¼‰ | **20 åˆ†é’Ÿ**ï¼ˆAI è¾…åŠ©é‡æ„ï¼‰ |
| **é›†æˆæ–°æœåŠ¡**ï¼ˆGeminiï¼‰ | 40 åˆ†é’Ÿï¼ˆå‚è€ƒç°æœ‰ä»£ç ï¼‰ | **15 åˆ†é’Ÿ**ï¼ˆAI å¤åˆ¶æ¨¡å¼ï¼‰ |
| **æ€»è®¡** | 160 åˆ†é’Ÿ | **68 åˆ†é’Ÿï¼ˆèŠ‚çœ 57.5%ï¼‰** |

### 6.5 Vibe Coding Friendly vs ä¼ ç»Ÿé¡¹ç›®ç»“æ„å¯¹æ¯”

#### ç¤ºä¾‹ï¼šæ·»åŠ "æ¶ˆæ¯æ”¶è—"åŠŸèƒ½

**ä¼ ç»Ÿé¡¹ç›®ç»“æ„**ï¼š
```
âŒ ä½ éœ€è¦é—® Cursor å¾ˆå¤šé—®é¢˜ï¼š

ä½ : "åœ¨å“ªé‡Œæ·»åŠ æ¶ˆæ¯æ”¶è—åŠŸèƒ½ï¼Ÿ"
AI: "ä¸ç¡®å®šï¼Œå¯èƒ½åœ¨ service ç›®å½•æˆ– handler ç›®å½•"

ä½ : "æ•°æ®åº“æ“ä½œåº”è¯¥æ”¾åœ¨å“ªï¼Ÿ"
AI: "çœ‹èµ·æ¥æœ‰ db.goã€dao.goã€repo.go ä¸‰ä¸ªåœ°æ–¹éƒ½åœ¨æ“ä½œæ•°æ®åº“..."

ä½ : "è¿™ä¸ªå‡½æ•° proc() æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ"
AI: "ä»ä»£ç çœ‹å¯èƒ½æ˜¯å¤„ç†æ¶ˆæ¯ï¼Œä½†ç¼ºå°‘æ³¨é‡Šï¼Œä¸å¤ªç¡®å®š"

âŒ æœ€ç»ˆï¼šèŠ±è´¹ 30 åˆ†é’Ÿï¼ŒAI ç”Ÿæˆçš„ä»£ç éœ€è¦äººå·¥å¤§å¹…ä¿®æ”¹
```

**Vibe Coding Friendly é¡¹ç›®ç»“æ„**ï¼š
```
âœ… åªéœ€ä¸€ä¸ªæ¸…æ™°çš„ promptï¼š

ä½ : "æ·»åŠ æ¶ˆæ¯æ”¶è—åŠŸèƒ½ï¼š
1. ç”¨æˆ·å¯ä»¥æ”¶è—/å–æ¶ˆæ”¶è—æ¶ˆæ¯
2. æŸ¥çœ‹æ‰€æœ‰æ”¶è—çš„æ¶ˆæ¯
3. éµå¾ªç°æœ‰çš„ DDD æ¶æ„"

AI è‡ªåŠ¨ï¼š
1. âœ… ç†è§£åº”è¯¥åœ¨ domain/chat é¢†åŸŸä¸‹æ·»åŠ 
2. âœ… åˆ›å»º valueobject/favorite_status.go
3. âœ… åœ¨ entity/message.go æ·»åŠ  IsFavorited å­—æ®µ
4. âœ… åœ¨ repository/message_repository.go æ·»åŠ ç›¸å…³æ¥å£
5. âœ… åœ¨ infrastructure/persistence/postgres/ å®ç°
6. âœ… åœ¨ application/service/ æ·»åŠ åº”ç”¨æœåŠ¡
7. âœ… åœ¨ interfaces/http/handler/ æ·»åŠ  HTTP æ¥å£
8. âœ… æ‰€æœ‰ä»£ç éƒ½ç¬¦åˆæ¶æ„è§„èŒƒï¼ŒåŒ…å«å®Œæ•´æ³¨é‡Š

âœ… æœ€ç»ˆï¼š15 åˆ†é’Ÿå®Œæˆï¼Œä»£ç ç›´æ¥å¯ç”¨
```

#### ä»£ç å¯¹æ¯”

**ä¼ ç»Ÿé¡¹ç›®ï¼ˆAI éš¾ä»¥ç†è§£ï¼‰**ï¼š
```go
// âŒ æ–‡ä»¶ï¼šhandler.goï¼ˆ3000 è¡Œï¼Œæ··æ‚æ‰€æœ‰åŠŸèƒ½ï¼‰

func (h *H) Proc(c *gin.Context) {  // å‡½æ•°åä¸æ¸…æ™°
    var req map[string]interface{}  // ç±»å‹ä¸æ˜ç¡®
    c.BindJSON(&req)
    
    // ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“æ“ä½œæ··åœ¨ä¸€èµ·
    db.Table("msgs").Where("id = ?", req["id"]).Update("fav", true)
    
    c.JSON(200, gin.H{"ok": true})  // é”™è¯¯å¤„ç†ç¼ºå¤±
}
```

**Vibe Coding Friendly é¡¹ç›®ï¼ˆAI å®¹æ˜“ç†è§£ï¼‰**ï¼š
```go
// âœ… æ–‡ä»¶ï¼šinterfaces/http/handler/message_handler.go

// FavoriteMessage æ”¶è—æ¶ˆæ¯
// POST /api/messages/:id/favorite
func (h *MessageHandler) FavoriteMessage(ctx context.Context, c *app.RequestContext) {
    req := new(request.FavoriteMessageRequest)
    if err := c.Bind(req); err != nil {
        h.handleError(c, errors.WrapError(err, "invalid request"))
        return
    }
    
    // è°ƒç”¨åº”ç”¨æœåŠ¡ï¼ˆä¸šåŠ¡ç¼–æ’ï¼‰
    err := h.messageAppService.FavoriteMessage(ctx, req.MessageID, req.UserID)
    if err != nil {
        h.handleError(c, err)
        return
    }
    
    c.JSON(http.StatusOK, response.Success("æ¶ˆæ¯å·²æ”¶è—"))
}

// âœ… æ–‡ä»¶ï¼šapplication/service/message_application_service.go

func (s *MessageApplicationService) FavoriteMessage(
    ctx context.Context,
    messageID string,
    userID string,
) error {
    // è·å–æ¶ˆæ¯
    message, err := s.messageRepo.GetByID(ctx, messageID)
    if err != nil {
        return errors.WrapError(err, "message not found")
    }
    
    // æ£€æŸ¥æƒé™
    if message.UserID != userID {
        return errors.ErrUnauthorized
    }
    
    // æ›´æ–°æ”¶è—çŠ¶æ€ï¼ˆé¢†åŸŸé€»è¾‘ï¼‰
    message.SetFavorited(true)
    
    // æŒä¹…åŒ–
    err = s.messageRepo.Update(ctx, message)
    if err != nil {
        return errors.WrapError(err, "failed to update message")
    }
    
    // è®°å½•ç›‘æ§ï¼ˆå¼‚æ­¥ï¼‰
    s.monitorService.RecordAction(ctx, "message_favorited", messageID)
    
    return nil
}
```

**ä¸ºä»€ä¹ˆ AI æ›´å–œæ¬¢ Vibe Coding Friendly é¡¹ç›®**ï¼š
1. âœ… æ–‡ä»¶èŒè´£å•ä¸€ï¼ˆ`message_handler.go` vs å·¨å‹ `handler.go`ï¼‰
2. âœ… å‡½æ•°åè‡ªè§£é‡Šï¼ˆ`FavoriteMessage` vs `Proc`ï¼‰
3. âœ… ç±»å‹æ˜ç¡®ï¼ˆ`FavoriteMessageRequest` vs `map[string]interface{}`ï¼‰
4. âœ… åˆ†å±‚æ¸…æ™°ï¼ˆhandler â†’ application â†’ domainï¼‰
5. âœ… é”™è¯¯å¤„ç†æ ‡å‡†åŒ–
6. âœ… å®Œæ•´çš„æ³¨é‡Šå’Œç¤ºä¾‹

### 6.6 ä» Vibe Coding Friendly Starter å¼€å§‹

ä½¿ç”¨æœ¬é¡¹ç›®ä½œä¸ºèµ·ç‚¹ï¼Œä½ å¯ä»¥ï¼š

1. **5 åˆ†é’Ÿå¯åŠ¨**ï¼š
   ```bash
   git clone https://github.com/yourusername/go-genai-stack
   cd go-genai-stack
   docker-compose up
   # è®¿é—® http://localhost:3000
   ```

2. **ç«‹å³å¼€å§‹ vibe coding**ï¼š
   ```
   æ‰“å¼€ Cursor â†’ å¯¹ç€ä»£ç é—®ï¼š
   "å¦‚ä½•æ·»åŠ æ¶ˆæ¯æœç´¢åŠŸèƒ½ï¼Ÿ"
   "å¦‚ä½•é›†æˆè®¯é£æ˜Ÿç«å¤§æ¨¡å‹ï¼Ÿ"
   "å¦‚ä½•æ·»åŠ æˆæœ¬å‘Šè­¦åŠŸèƒ½ï¼Ÿ"
   ```

3. **AI å‡†ç¡®ç”Ÿæˆä»£ç **ï¼š
   - å› ä¸ºæ¶æ„æ¸…æ™°ï¼ˆDDD å››å±‚ï¼‰
   - å‘½åè§„èŒƒï¼ˆè¯­ä¹‰åŒ–ã€è‡ªè§£é‡Šï¼‰
   - æ³¨é‡Šå®Œæ•´ï¼ˆæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä½¿ç”¨ç¤ºä¾‹ï¼‰

4. **å¿«é€Ÿè¿­ä»£**ï¼š
   - AI å¸®ä½ é‡æ„ä»£ç 
   - AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
   - AI ä¼˜åŒ–æ€§èƒ½

5. **ç”Ÿäº§å°±ç»ª**ï¼š
   - é™æµã€ç†”æ–­ã€é‡è¯•å·²å†…ç½®
   - ç›‘æ§ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†å®Œå–„
   - å¼€ç®±å³ç”¨ï¼Œæ— éœ€é¢å¤–é…ç½®

**è¿™å°±æ˜¯ AI æ—¶ä»£çš„å…¨æ ˆå¼€å‘æ–°èŒƒå¼ï¼** ğŸš€

**å£å·**ï¼š
> ğŸ“ æ¸…æ™°çš„æ¶æ„ï¼Œè®© AI æˆä¸ºä½ çš„é«˜çº§ç¨‹åºå‘˜  
> ğŸ¤– ä¸æ˜¯ä½ åœ¨å†™ä»£ç ï¼Œè€Œæ˜¯ AI åœ¨å¸®ä½ å®ç°æƒ³æ³•  
> âš¡ Vibe Coding: Think â†’ Ask â†’ Done

## 7. å®æ–½è·¯å¾„ (Implementation Plan)

### Phase 1: MVPï¼ˆ0-3 ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šå¿«é€Ÿä¸Šçº¿ï¼ŒéªŒè¯å¸‚åœºéœ€æ±‚

- [ ] åŸºç¡€èŠå¤©ç•Œé¢
- [ ] OpenAI é›†æˆï¼ˆåŸºäº Einoï¼‰
- [ ] æµå¼å“åº”
- [ ] Docker Compose éƒ¨ç½²
- [ ] åŸºç¡€æ–‡æ¡£
- [ ] å‰åç«¯ç±»å‹åŒæ­¥ï¼ˆtygo + Cursor é…ç½®ï¼‰

**æ ¸å¿ƒæŒ‡æ ‡**ï¼š
- GitHub Stars > 100
- ç¤¾åŒºåé¦ˆæ”¶é›†

### Phase 2: åŠŸèƒ½æ‰©å±•ï¼ˆ3-6 ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šå®Œå–„åŠŸèƒ½ï¼Œå»ºç«‹å·®å¼‚åŒ–ä¼˜åŠ¿

- [ ] ç»“æ„åŒ–è¾“å‡ºå®Œæ•´å®ç°ï¼ˆåŸºäº Eino + JSON Schemaï¼‰
- [ ] å¤šæ¨¡å‹è·¯ç”±ä¸è´Ÿè½½å‡è¡¡ï¼ˆåŸºäº Eino çš„ç»Ÿä¸€æ¥å£ï¼‰
- [ ] å¯è§‚æµ‹æ€§ä¸ç›‘æ§ Dashboardï¼ˆTimescaleDB + Redisï¼‰
- [ ] å¤šæ¨¡å‹æ”¯æŒï¼ˆClaudeã€Ollamaã€é€šä¹‰åƒé—®ï¼‰
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆJWT + Redis Sessionï¼‰
- [ ] ç®¡ç†åå°ï¼ˆshadcn/uiï¼‰
- [ ] Context ç®¡ç†ä¸è£å‰ªï¼ˆtiktoken-goï¼‰
- [ ] æˆæœ¬æ§åˆ¶ä¸å‘Šè­¦

**æ ¸å¿ƒæŒ‡æ ‡**ï¼š
- GitHub Stars > 500
- æ´»è·ƒç”¨æˆ· > 50
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ¡ˆä¾‹ > 3

### Phase 3: ç”Ÿæ€å»ºè®¾ï¼ˆ6-12 ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šå»ºç«‹ç¤¾åŒºï¼Œæ‰©å±•ç”Ÿæ€

- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] æ¨¡æ¿å¸‚åœº
- [ ] é›†æˆæ›´å¤šç›‘æ§æœåŠ¡ï¼ˆPrometheusã€Grafanaï¼‰
- [ ] æŠ€æœ¯åšå®¢ä¸æœ€ä½³å®è·µ
- [ ] ä¼šè®®åˆ†äº«

**æ ¸å¿ƒæŒ‡æ ‡**ï¼š
- GitHub Stars > 1000
- ç¤¾åŒºè´¡çŒ®è€… > 10

## 8. æ¨å¹¿ç­–ç•¥ (How to get Stars)

### 8.1 å†…å®¹è¥é”€

1. **Vibe Coding Friendly å®šä½è¥é”€**ï¼š
   - æ ‡é¢˜ï¼š**"é¦–ä¸ªåŸºäº Vibe Coding Friendly DDD çš„ Go LLM å…¨æ ˆæ¡†æ¶"**
   - å‰¯æ ‡é¢˜ï¼š**"ä¸æ˜¯ä¼ ç»Ÿ DDDï¼Œæ˜¯ä¸“ä¸º AI è¾…åŠ©ç¼–ç¨‹ä¼˜åŒ–çš„æ¶æ„å˜ä½“"**
   - å£å·ï¼š**"Think â†’ Ask Cursor â†’ Done in 5 Minutes"**
   - ç—›ç‚¹ï¼š
     - ä¼ ç»Ÿ MVCï¼šAI æ— æ³•ç†è§£
     - ä¼ ç»Ÿ DDDï¼šæ¦‚å¿µæŠ½è±¡ï¼ŒAI ç”Ÿæˆä»£ç ä¸å‡†ç¡®
     - **Vibe Coding Friendly DDD**ï¼šAI ç”Ÿæˆå‡†ç¡®åº¦ 80%+

2. **å¯¹æ¯”è¥é”€**ï¼š
   - å¯¹æ¯”ä¼ ç»Ÿæ··ä¹±çš„ä»£ç åº“ vs AI-Friendly æ¶æ„
   - å±•ç¤º Cursor åœ¨æœ¬é¡¹ç›®ä¸­çš„å¼€å‘æ•ˆç‡æå‡
   - Python ç”Ÿæ€ vs Go ç”Ÿæ€çš„è¡¥å……ä»·å€¼

3. **æ€æ‰‹çº§ Demo**ï¼š
   - åœ¨çº¿æ¼”ç¤ºï¼šå±•ç¤ºç»“æ„åŒ–è¾“å‡ºã€å¤šæ¨¡å‹è·¯ç”±ã€ç›‘æ§ Dashboard
   - **è§†é¢‘ï¼šç”¨ Cursor åœ¨æœ¬é¡¹ç›®ä¸­ 5 åˆ†é’Ÿæ·»åŠ æ–°åŠŸèƒ½**
   - **å¯¹æ¯”è§†é¢‘ï¼šä¼ ç»Ÿé¡¹ç›® vs AI-Friendly é¡¹ç›®çš„ AI è¾…åŠ©å¼€å‘ä½“éªŒ**

4. **SEO å…³é”®è¯**ï¼š
   - æ ¸å¿ƒï¼š`vibe coding friendly`, `vibe coding ddd`, `ai friendly ddd`, `cursor friendly ddd`
   - æ¶æ„ï¼š`ddd for ai`, `ai optimized architecture`, `ddd variant`, `modern ddd`
   - å¯¹æ¯”ï¼š`traditional ddd vs vibe coding ddd`, `ddd evolution`
   - æŠ€æœ¯æ ˆï¼š`golang llm`, `hertz llm`, `eino starter`, `ddd golang`
   - åœºæ™¯ï¼š`llm fullstack`, `go genai`, `ai coding starter`, `cursor template`
   - å­—èŠ‚èƒŒä¹¦ï¼š`bytedance hertz`, `bytedance eino`

### 8.2 ç¤¾åŒºæ¨å¹¿

1. **æŠ€æœ¯ç¤¾åŒº**ï¼š
   - Go ä¸­æ–‡ç¤¾åŒºï¼ˆGoCNã€Go å¤œè¯»ï¼‰
   - Reddit r/golang
   - Hacker News
   - æ˜é‡‘ã€æ€å¦ç­‰æŠ€æœ¯å¹³å°
   - **Cursor ç¤¾åŒºã€AI ç¼–ç¨‹ç›¸å…³è®ºå›**

2. **å†…å®¹è¾“å‡º**ï¼š
   - **æŠ€æœ¯åšå®¢**ï¼š
     - **"Vibe Coding Friendly DDDï¼šä¸º AI æ—¶ä»£é‡æ–°è®¾è®¡çš„æ¶æ„"**
     - "ä¼ ç»Ÿ DDD vs Vibe Coding Friendly DDDï¼š5 å¤§åˆ›æ–°ç‚¹"
     - "ç”¨ Cursor åœ¨ 5 åˆ†é’Ÿå†…ç»™ LLM åº”ç”¨æ·»åŠ æ–°åŠŸèƒ½"
     - "ä¸ºä»€ä¹ˆä¼ ç»Ÿ DDD å¯¹ AI ä¸å‹å¥½ï¼Ÿ"
     - "å®æµ‹ï¼šVibe Coding Friendly æ¶æ„è®©å¼€å‘æ•ˆç‡æå‡ 50%+"
   - **è§†é¢‘æ•™ç¨‹**ï¼š
     - å¿«é€Ÿå¼€å§‹ï¼ˆDocker Compose ä¸€é”®å¯åŠ¨ï¼‰
     - **Cursor å®æˆ˜ï¼šAI å¦‚ä½•ç†è§£ Vibe Coding Friendly DDD**
     - **å¯¹æ¯”æ¼”ç¤ºï¼šä¼ ç»Ÿ DDD vs Vibe Coding Friendly DDD**
     - ä»é›¶æ„å»º Vibe Coding Friendly é¡¹ç›®
   - **å¼€æºæ—¥æŠ¥æŠ•ç¨¿**ï¼š
     - "é¦–ä¸ª Vibe Coding Friendly DDD å…¨æ ˆæ¡†æ¶å¼€æº"
   - **æŠ€æœ¯ä¼šè®®åˆ†äº«**ï¼š
     - Go å¤§ä¼šï¼š"Vibe Coding Friendly DDD å®è·µ"
     - AI å¼€å‘è€…å¤§ä¼šï¼š"AI æ—¶ä»£çš„æ¶æ„è®¾è®¡"

3. **AI ç¼–ç¨‹ç¤¾åŒº**ï¼š
   - Cursor å®˜æ–¹ç¤¾åŒº
   - GitHub Copilot ç”¨æˆ·ç¾¤
   - v0.devã€Bolt.new ç­‰ AI å¼€å‘å·¥å…·çš„ç”¨æˆ·ç¾¤

### 8.3 å·®å¼‚åŒ–ä¼˜åŠ¿å±•ç¤º

1. **AI-Friendly å¯¹æ¯”**ï¼ˆæ ¸å¿ƒå–ç‚¹ï¼‰ï¼š
   - ä¼ ç»Ÿæ··ä¹±ä»£ç åº“ï¼šAI éœ€è¦å¤§é‡ prompt æ‰èƒ½ç†è§£
   - æœ¬é¡¹ç›®ï¼šAI ç«‹å³ç†è§£æ¶æ„ï¼Œå‡†ç¡®ç”Ÿæˆä»£ç 
   - **å®æµ‹æ•°æ®**ï¼šç”¨ Cursor æ·»åŠ åŒæ ·åŠŸèƒ½ï¼Œæœ¬é¡¹ç›®èŠ‚çœ 50% æ—¶é—´

2. **Cursor å®æˆ˜è§†é¢‘**ï¼š
   - å±•ç¤ºå¦‚ä½•ç”¨ Cursor å¿«é€Ÿæ·»åŠ æ–°åŠŸèƒ½
   - AI ç†è§£ DDD æ¶æ„ï¼Œç”Ÿæˆå‡†ç¡®ä»£ç 
   - å¯¹æ¯”ä¼ ç»Ÿé¡¹ç›®çš„å¼€å‘ä½“éªŒ

3. **æ€§èƒ½å¯¹æ¯”**ï¼šä¸ Python æ–¹æ¡ˆå¯¹æ¯”ï¼Œå±•ç¤º Go çš„å¹¶å‘ä¼˜åŠ¿

4. **éƒ¨ç½²ä½“éªŒ**ï¼šä¸€é”®å¯åŠ¨ vs å¤æ‚é…ç½®

5. **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æœŸæ£€æŸ¥ vs è¿è¡Œæ—¶é”™è¯¯

6. **ç”Ÿäº§å°±ç»ª**ï¼šå¼€ç®±å³ç”¨çš„ç›‘æ§ã€é™æµã€ç†”æ–­ã€é‡è¯•

## 9. é£é™©è¯„ä¼°ä¸åº”å¯¹

### 9.1 æ½œåœ¨é£é™©

1. **æ¡†æ¶é¡¹ç›®å¯èƒ½æ‰©å±•ä¸º starter**
   - **åº”å¯¹**ï¼šä¸“æ³¨ starter å®šä½ï¼Œæä¾›å®Œæ•´åº”ç”¨è€Œéæ¡†æ¶

2. **å¤§å‚å¯èƒ½æ¨å‡ºç±»ä¼¼é¡¹ç›®**
   - **åº”å¯¹**ï¼šå¿«é€Ÿè¿­ä»£ï¼Œå»ºç«‹ç¤¾åŒºï¼Œå½¢æˆå…ˆå‘ä¼˜åŠ¿

3. **Python ç”Ÿæ€è¿ç§»æˆæœ¬**
   - **åº”å¯¹**ï¼šå¼ºè°ƒ Go çš„æ€§èƒ½ä¼˜åŠ¿ã€éƒ¨ç½²ä¼˜åŠ¿ã€ç±»å‹å®‰å…¨ä¼˜åŠ¿

### 9.2 æˆåŠŸå› ç´ 

1. **å¿«é€Ÿè¡ŒåŠ¨**ï¼šæŠ¢å å¸‚åœºç©ºç™½
2. **ç”¨æˆ·ä½“éªŒ**ï¼šé™ä½ä¸Šæ‰‹é—¨æ§›
3. **æŒç»­è¿­ä»£**ï¼šå“åº”ç¤¾åŒºåé¦ˆ
4. **ç¤¾åŒºå»ºè®¾**ï¼šå»ºç«‹æ´»è·ƒçš„å¼€å‘è€…ç¤¾åŒº

## 10. æˆåŠŸæŒ‡æ ‡ (Success Metrics)

### 10.1 çŸ­æœŸæŒ‡æ ‡ï¼ˆ3 ä¸ªæœˆï¼‰

- GitHub Stars > 100
- Fork > 20
- Issues/PRs > 10
- ç¤¾åŒºåé¦ˆæ”¶é›†

### 10.2 ä¸­æœŸæŒ‡æ ‡ï¼ˆ6 ä¸ªæœˆï¼‰

- GitHub Stars > 500
- æ´»è·ƒç”¨æˆ· > 50
- è´¡çŒ®è€… > 5
- æŠ€æœ¯åšå®¢/è§†é¢‘ > 3 ç¯‡

### 10.3 é•¿æœŸæŒ‡æ ‡ï¼ˆ12 ä¸ªæœˆï¼‰

- GitHub Stars > 1000
- ç¤¾åŒºè´¡çŒ®è€… > 10
- ä¼ä¸šç”¨æˆ·æ¡ˆä¾‹ > 3
- æŠ€æœ¯ä¼šè®®åˆ†äº« > 1 æ¬¡

## 11. æ€»ç»“

### 11.1 æ ¸å¿ƒä»·å€¼ä¸»å¼ 

1. **ğŸ¤– AI-Friendlyï¼ˆæ ¸å¿ƒå·®å¼‚åŒ–ï¼‰**ï¼š
   - ä¸“ä¸º AI è¾…åŠ©å¼€å‘ä¼˜åŒ–ï¼Œæ˜¯ä½¿ç”¨ Cursor è¿›è¡Œ vibe coding çš„æœ€ä½³èµ·ç‚¹
   - DDD æ¶æ„è®© AI å¿«é€Ÿç†è§£ä»£ç ç»“æ„
   - è¯­ä¹‰åŒ–å‘½åã€å®Œå–„æ³¨é‡Šï¼ŒAI ç”Ÿæˆä»£ç æ›´å‡†ç¡®
   - æ˜¾å¼ä¾èµ–æ³¨å…¥ï¼ŒAI è½»æ¾ç¼–å†™æµ‹è¯•

2. **ğŸš€ é™ä½é—¨æ§›**ï¼šDocker Compose ä¸€é”®å¯åŠ¨ï¼Œ5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ï¼Œæ— éœ€ä»é›¶æ­å»º

3. **âœ… ç”Ÿäº§å°±ç»ª**ï¼šå¼€ç®±å³ç”¨çš„é™æµã€ç†”æ–­ã€é‡è¯•ã€ç›‘æ§ç­‰ç”Ÿäº§çº§ç‰¹æ€§

4. **ğŸ”’ ç±»å‹å®‰å…¨**ï¼šåŸºäº Go struct çš„ç»“æ„åŒ–è¾“å‡ºï¼Œç¼–è¯‘æœŸæ£€æŸ¥ï¼Œè‡ªåŠ¨é‡è¯•éªŒè¯

5. **âš¡ æ€§èƒ½ä¼˜åŠ¿**ï¼š
   - Go çš„å¹¶å‘ç‰¹æ€§ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼ˆ1000+ QPSï¼‰
   - Hertz é«˜æ€§èƒ½ HTTP æ¡†æ¶
   - å•äºŒè¿›åˆ¶éƒ¨ç½²ï¼Œå†…å­˜å ç”¨ä½

6. **ğŸ¢ å­—èŠ‚æŠ€æœ¯æ ˆ**ï¼šHertz + Einoï¼Œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š

7. **ğŸ“ DDD æ¶æ„**ï¼šæ¸…æ™°çš„é¢†åŸŸåˆ’åˆ†ï¼Œä»£ç æ˜“äºç†è§£å’Œæ‰©å±•ï¼Œå¤©ç„¶é€‚åˆ AI ç†è§£

8. **ğŸ¯ ç²¾å‡†å®šä½**ï¼šGo ç”Ÿæ€çš„ AI-Friendly å…¨æ ˆ starter ç©ºç™½ï¼Œè¡¥å……è€Œéç«äº‰

### 11.2 ç«äº‰ä¼˜åŠ¿

- âœ… **å¸‚åœºç©ºç™½**ï¼šGo å…¨æ ˆ LLM starter å‡ ä¹ç©ºç™½ï¼Œå…ˆå‘ä¼˜åŠ¿æ˜æ˜¾
- âœ… **éœ€æ±‚æ˜ç¡®**ï¼šå¼€å‘è€…éœ€è¦å¿«é€Ÿå¯åŠ¨æ¨¡æ¿ï¼Œé¿å…é‡å¤é€ è½®å­
- âœ… **æŠ€æœ¯å¯è¡Œ**ï¼šHertz + Eino éƒ½æ˜¯ç”Ÿäº§éªŒè¯çš„æˆç†ŸæŠ€æœ¯
- âœ… **å­—èŠ‚èƒŒä¹¦**ï¼šç«™åœ¨å·¨äººè‚©è†€ä¸Šï¼Œå€ŸåŠ©å­—èŠ‚çš„æŠ€æœ¯å½±å“åŠ›
- âœ… **æ¶æ„æ¸…æ™°**ï¼šDDD æ¶æ„ + åˆ†å±‚è®¾è®¡ï¼Œæ˜“äºç†è§£å’Œæ‰©å±•
- âœ… **ç¤¾åŒºå‹å¥½**ï¼šGo ç¤¾åŒºæ¬¢è¿å®ç”¨é¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯ç”Ÿäº§å°±ç»ªçš„ starter

### 11.3 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

#### ç¬¬ 1 å‘¨ï¼šé¡¹ç›®æ­å»º
1. **åˆ›å»ºé¡¹ç›®ç»“æ„**ï¼šæŒ‰ç…§ DDD æ¶æ„åˆ›å»ºç›®å½•
2. **é›†æˆ Hertz**ï¼šå®ç°åŸºç¡€ HTTP æœåŠ¡å’Œä¸­é—´ä»¶ï¼ˆCode-Firstï¼Œä¸ä½¿ç”¨ IDLï¼‰
3. **é›†æˆ Eino**ï¼šå®ç°åŸºç¡€çš„ LLM è°ƒç”¨ï¼ˆOpenAIï¼‰
4. **Docker Compose**ï¼šé…ç½® PostgreSQL + Redis ç¯å¢ƒ
5. **è®¾ç½®ç±»å‹åŒæ­¥**ï¼š
   - å®‰è£… tygoï¼š`go install github.com/gzuidhof/tygo@latest`
   - é…ç½® `tygo.yaml`
   - è®¾ç½®è„šæœ¬æ‰§è¡Œæƒé™ï¼š`chmod +x scripts/sync_types.sh`
   - é…ç½® `.cursorrules` ä»¥å¯ç”¨ AI ç±»å‹åŒæ­¥

#### ç¬¬ 2-4 å‘¨ï¼šæ ¸å¿ƒåŠŸèƒ½
6. **èŠå¤©åŠŸèƒ½**ï¼šå®ç°å¤šè½®å¯¹è¯ã€æµå¼å“åº”ã€å†å²æŒä¹…åŒ–
7. **ç»“æ„åŒ–è¾“å‡º**ï¼šå®ç° JSON Schema ç”Ÿæˆã€éªŒè¯ã€é‡è¯•
8. **å‰ç«¯åŸºç¡€**ï¼šReact + shadcn/uiï¼Œå®ç°èŠå¤©ç•Œé¢
9. **å‰ç«¯ç±»å‹é›†æˆ**ï¼šè¿è¡Œ `./scripts/sync_types.sh` åŒæ­¥ç±»å‹å®šä¹‰

#### ç¬¬ 5-8 å‘¨ï¼šè¿›é˜¶åŠŸèƒ½
8. **å¤šæ¨¡å‹è·¯ç”±**ï¼šå®ç°è·¯ç”±ç­–ç•¥ã€æ•…éšœè½¬ç§»
9. **ç›‘æ§ç³»ç»Ÿ**ï¼šå®ç°æŒ‡æ ‡æ”¶é›†ã€Dashboard
10. **é™æµç†”æ–­**ï¼šå®ç° Redis é™æµã€ç†”æ–­å™¨

#### ç¬¬ 9-12 å‘¨ï¼šå®Œå–„ä¸æ¨å¹¿
11. **æ–‡æ¡£å®Œå–„**ï¼š
    - API æ–‡æ¡£ã€éƒ¨ç½²æ–‡æ¡£
    - **AI è¾…åŠ©å¼€å‘æœ€ä½³å®è·µæ–‡æ¡£**
    - **Cursor ä½¿ç”¨æŒ‡å—ï¼šå¦‚ä½•ç”¨ AI å¿«é€Ÿæ‰©å±•åŠŸèƒ½**
12. **æµ‹è¯•è¦†ç›–**ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•
13. **AI-Friendly è¥é”€**ï¼š
    - **è§†é¢‘ï¼šç”¨ Cursor åœ¨ 5 åˆ†é’Ÿå†…æ·»åŠ æ–°åŠŸèƒ½**
    - åšå®¢ï¼šã€Šä¸ºä»€ä¹ˆ DDD æ¶æ„æ˜¯ AI-Friendly çš„ï¼Ÿã€‹
    - åšå®¢ï¼šã€ŠAI æ—¶ä»£çš„å…¨æ ˆå¼€å‘ï¼šä» Cursor è¯´èµ·ã€‹
14. **ç¤¾åŒºæ¨å¹¿**ï¼š
    - GitHubã€æŠ€æœ¯ç¤¾åŒºã€Cursor ç¤¾åŒº
    - Hacker Newsã€Reddit r/golang
    - AI ç¼–ç¨‹ç›¸å…³è®ºå›å’Œç¤¾ç¾¤

## 12. ä¾èµ–çš„å¼€æºé¡¹ç›®

### 12.1 æ ¸å¿ƒä¾èµ–

#### åç«¯
- **Hertz**ï¼šå­—èŠ‚è·³åŠ¨å¼€æºçš„é«˜æ€§èƒ½ HTTP æ¡†æ¶ï¼ˆApache 2.0ï¼‰
- **Eino**ï¼šå­—èŠ‚è·³åŠ¨å¼€æºçš„ Go LLM åº”ç”¨å¼€å‘æ¡†æ¶ï¼ˆApache 2.0ï¼‰
- **PostgreSQL**ï¼šå…³ç³»å‹æ•°æ®åº“ï¼ˆPostgreSQL Licenseï¼‰
- **TimescaleDB**ï¼šæ—¶åºæ•°æ®åº“æ‰©å±•ï¼ˆApache 2.0ï¼‰
- **Redis**ï¼šç¼“å­˜å’Œé™æµï¼ˆBSD 3-Clauseï¼‰
- **Asynq**ï¼šä»»åŠ¡é˜Ÿåˆ—ï¼ˆMITï¼‰
- **Viper**ï¼šé…ç½®ç®¡ç†ï¼ˆMITï¼‰
- **Zap**ï¼šç»“æ„åŒ–æ—¥å¿—ï¼ˆMITï¼‰
- **invopop/jsonschema**ï¼šJSON Schema ç”Ÿæˆï¼ˆMITï¼‰
- **xeipuuv/gojsonschema**ï¼šJSON Schema éªŒè¯ï¼ˆApache 2.0ï¼‰
- **sony/gobreaker**ï¼šç†”æ–­å™¨ï¼ˆMITï¼‰
- **avast/retry-go**ï¼šé‡è¯•åº“ï¼ˆMITï¼‰
- **tiktoken-go**ï¼šToken è®¡æ•°ï¼ˆMITï¼‰

#### DevOps & å·¥å…·
- **tygo**ï¼šGo Struct åˆ° TypeScript æ¥å£è½¬æ¢ï¼ˆMITï¼‰
- **Docker**ï¼šå®¹å™¨åŒ–ï¼ˆApache 2.0ï¼‰
- **Docker Compose**ï¼šå¤šå®¹å™¨ç¼–æ’ï¼ˆApache 2.0ï¼‰

#### å‰ç«¯
- **React**ï¼šUI æ¡†æ¶ï¼ˆMITï¼‰
- **TypeScript**ï¼šç±»å‹ç³»ç»Ÿï¼ˆApache 2.0ï¼‰
- **Vite**ï¼šæ„å»ºå·¥å…·ï¼ˆMITï¼‰
- **Tailwind CSS**ï¼šæ ·å¼æ¡†æ¶ï¼ˆMITï¼‰
- **shadcn/ui**ï¼šUI ç»„ä»¶åº“ï¼ˆMITï¼‰
- **Zustand**ï¼šçŠ¶æ€ç®¡ç†ï¼ˆMITï¼‰
- **Axios**ï¼šHTTP å®¢æˆ·ç«¯ï¼ˆMITï¼‰
- **react-markdown**ï¼šMarkdown æ¸²æŸ“ï¼ˆMITï¼‰

### 12.2 License

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT License**ï¼Œå…è®¸ï¼š
- âœ… å•†ä¸šä½¿ç”¨
- âœ… ä¿®æ”¹ä»£ç 
- âœ… åˆ†å‘
- âœ… ç§æœ‰ä½¿ç”¨

---

## é™„å½•ï¼šé¡¹ç›®ä¿¡æ¯

**é¡¹ç›®çŠ¶æ€**ï¼šè®¾è®¡é˜¶æ®µ  

**æ ¸å¿ƒåˆ›æ–°**ï¼š**Vibe Coding Friendly DDD æ¶æ„**
- ä¸æ˜¯ä¼ ç»Ÿ DDDï¼Œæ˜¯ä¸“ä¸º AI è¾…åŠ©å¼€å‘ä¼˜åŒ–çš„æ¶æ„å˜ä½“
- AI ç”Ÿæˆä»£ç å‡†ç¡®åº¦ä» 30% â†’ 80%+
- å¼€å‘æ•ˆç‡æå‡ 50%+ï¼ˆå®æµ‹æ•°æ®ï¼‰

**æ ¸å¿ƒå®šä½**ï¼š
- é¦–ä¸ªåŸºäº Vibe Coding Friendly DDD çš„ Go LLM å…¨æ ˆæ¡†æ¶
- ä¸º AI è¾…åŠ©ç¼–ç¨‹æ—¶ä»£è®¾è®¡çš„ç”Ÿäº§çº§ Starter

**ç›®æ ‡ç”¨æˆ·**ï¼š
- ä½¿ç”¨ Cursor/Copilot ç­‰ AI å·¥å…·è¿›è¡Œå¼€å‘çš„å¼€å‘è€…
- éœ€è¦å¿«é€Ÿæ­å»ºç”Ÿäº§çº§ LLM åº”ç”¨çš„å›¢é˜Ÿ
- å¸Œæœ›å­¦ä¹  Vibe Coding Friendly DDD æ¶æ„çš„å¼€å‘è€…
- å¯¹ä¼ ç»Ÿ DDD æ„Ÿåˆ°å¤æ‚ï¼Œå¸Œæœ›æœ‰æ›´ AI-Friendly æ–¹æ¡ˆçš„å¼€å‘è€…

**æŠ€æœ¯æ ˆ**ï¼š
- åç«¯ï¼šGo + Hertz + Eino + Vibe Coding Friendly DDD
- å‰ç«¯ï¼šReact 19 + TypeScript + shadcn/ui
- æ•°æ®åº“ï¼šPostgreSQL + TimescaleDB + Redis

**é¢„è®¡å¯åŠ¨æ—¶é—´**ï¼šå¾…å®š  
**ç»´æŠ¤è€…**ï¼šå¾…å®š
**License**ï¼šMIT

**å£å·**ï¼š
> ğŸ—ï¸ Vibe Coding Friendly DDD - Architecture for AI Era  
> ğŸ¤– Not Traditional DDD - Optimized for AI Coding  
> ğŸš€ Think â†’ Ask Cursor â†’ Done in 5 Minutes  
> âš¡ 80%+ AI Code Accuracy - Production Ready

